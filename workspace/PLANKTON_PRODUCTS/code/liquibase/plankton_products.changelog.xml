<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

  <changeSet author="talend" id="table_cpr_phyto_htg">
    <sql>
      CREATE TABLE cpr_phyto_htg (
        id bigserial PRIMARY KEY,
        "Route" text NOT NULL,
        "Latitude" double precision NOT NULL,
        "Longitude" double precision NOT NULL,
        "SampleDateUTC" timestamp without time zone NOT NULL,
        "Year" integer NOT NULL,
        "Month" integer NOT NULL,
        "Day" integer NOT NULL,
        "Time_24hr" text NOT NULL,
        "Centric_diatom" real,
        "Ciliate" real,
        "Cyanobacteria" real,
        "Dinoflagellate" real,
        "Flagellate" real,
        "Foraminifera" real,
        "Pennate_diatom" real,
        "Radiozoa" real,
        "Silicoflagellate" real,
        geom geometry(Geometry,4326) CHECK (st_isvalid(geom))
      );

      CREATE INDEX cpr_phyto_htg_gist_idx ON cpr_phyto_htg USING GIST (geom);
    </sql>
  </changeSet>


  <changeSet author="talend" id="table_cpr_phyto_genus">
    <sql>
      CREATE TABLE cpr_phyto_genus (
        id bigserial PRIMARY KEY,
        "Route" text NOT NULL,
        "Latitude" double precision NOT NULL,
        "Longitude" double precision NOT NULL,
        "SampleDateUTC" timestamp without time zone NOT NULL,
        "Year" integer NOT NULL,
        "Month" integer NOT NULL,
        "Day" integer NOT NULL,
        "Time_24hr" text NOT NULL,
        "Acanthoica" real,
        "Acanthostomella" real,
        "Actinocyclus" real,
        "Alexandrium" real,
        "Amphidinium" real,
        "Amphisolenia" real,
        "Amphora" real,
        "Amphorides" real,
        "Ascampbelliella" real,
        "Asterionella" real,
        "Asterionellopsis" real,
        "Asteromphalus" real,
        "Bacillaria" real,
        "Bacteriastrum" real,
        "Bellerochea" real,
        "Biddulphia" real,
        "Braarudosphaera" real,
        "Cerataulina" real,
        "Ceratium" real,
        "Ceratocorys" real,
        "Ceratoneis" real,
        "Chaetoceros" real,
        "Climacocylis" real,
        "Climacodium" real,
        "Cocconeis" real,
        "Codonella" real,
        "Codonellopsis" real,
        "Corethron" real,
        "Coscinodiscus" real,
        "Cylindrotheca" real,
        "Cymatocylis" real,
        "Cyttarocylis" real,
        "Dactyliosolen" real,
        "Dadayiella" real,
        "Daturella" real,
        "Detonula" real,
        "Dictyocha" real,
        "Dictyocysta" real,
        "Dinophysis" real,
        "Diploneis" real,
        "Ditylum" real,
        "Entomoneis" real,
        "Epiplocylis" real,
        "Eucampia" real,
        "Eutintinnus" real,
        "Favella" real,
        "Fragilaria" real,
        "Fragilariopsis" real,
        "Gazelletta" real,
        "Globotoralia" real,
        "Gonyaulax" real,
        "Grammatophora" real,
        "Guinardia" real,
        "Gymnodinium" real,
        "Gyrodinium" real,
        "Hemiaulus" real,
        "Lauderia" real,
        "Leptocylindrus" real,
        "Licmophora" real,
        "Lioloma" real,
        "Lithodesmium" real,
        "Mastogloia" real,
        "Melosira" real,
        "Membraneis" real,
        "Navicula" real,
        "Nitzschia" real,
        "Noctiluca" real,
        "Octactis" real,
        "Odontella" real,
        "Ornithocercus" real,
        "Oxytoxum" real,
        "Paralia" real,
        "Parundella" real,
        "Peridinium" real,
        "Phaeocystis" real,
        "Phalacroma" real,
        "Planktoniella" real,
        "Pleurosigma" real,
        "Podolampas" real,
        "Proboscia" real,
        "Prorocentrum" real,
        "Protoperidinium" real,
        "Psammodictyon" real,
        "Pseudo-nitzschia" real,
        "Pseudosolenia" real,
        "Pterosperma" real,
        "Ptychodiscus" real,
        "Pyrocystis" real,
        "Pyrophacus" real,
        "Rhabdonella" real,
        "Rhizosolenia" real,
        "Sagenoarium" real,
        "Salpingella" real,
        "Scrippsiella" real,
        "Skeletonema" real,
        "Steenstrupiella" real,
        "Stephanopyxis" real,
        "Striatella" real,
        "Thalassionema" real,
        "Thalassiosira" real,
        "Thalassiothrix" real,
        "Tintinnopsis" real,
        "Tintinnus" real,
        "Trichodesmium" real,
        "Trichotoxon" real,
        "Trigonium" real,
        "Tripos" real,
        "Undella" real,
        "Xystonella" real,
        "Xystonellopsis" real,
        geom geometry(Geometry,4326) CHECK (st_isvalid(geom))
      );

      CREATE INDEX cpr_phyto_genus_gist_idx ON cpr_phyto_genus USING GIST (geom);
    </sql>
  </changeSet>


  <changeSet author="talend" id="table_cpr_phyto_species">
    <sql>
      CREATE TABLE cpr_phyto_species (
        id bigserial PRIMARY KEY,
        "Route" text NOT NULL,
        "Latitude" double precision NOT NULL,
        "Longitude" double precision NOT NULL,
        "SampleDateUTC" timestamp without time zone NOT NULL,
        "Year" integer NOT NULL,
        "Month" integer NOT NULL,
        "Day" integer NOT NULL,
        "Time_24hr" text NOT NULL,
        "Acanthoica_quattrospina" real,
        "Amphidinium_hadai" real,
        "Amphisolenia_bidentata" real,
        "Amphisolenia_thrinax" real,
        "Asterionellopsis_glacialis" real,
        "Asteromphalus_hookeri" real,
        "Bacillaria_paxillifera" real,
        "Bacteriastrum_delicatulum" real,
        "Bellerochea_horologicalis" real,
        "Bellerochea_malleus" real,
        "Braarudosphaera_bigelowii" real,
        "Ceratocorys_horrida" real,
        "Ceratoneis_closterium" real,
        "Chaetoceros_Hyalochaete_brevis" real,
        "Chaetoceros_Hyalochaete_decipiens" real,
        "Chaetoceros_Hyalochaete_didymus" real,
        "Chaetoceros_Hyalochaete_lorenzianus" real,
        "Chaetoceros_Hyalochaete_messanense" real,
        "Chaetoceros_Hyalochaete_neglectus" real,
        "Chaetoceros_Hyalochaete_socialis" real,
        "Chaetoceros_Phaeoceros_atlanticus" real,
        "Chaetoceros_Phaeoceros_coarctatus" real,
        "Chaetoceros_Phaeoceros_convolutus" real,
        "Chaetoceros_Phaeoceros_criophilus" real,
        "Chaetoceros_Phaeoceros_densus" real,
        "Chaetoceros_Phaeoceros_dichaeta" real,
        "Chaetoceros_Phaeoceros_eibenii" real,
        "Chaetoceros_Phaeoceros_peruvianus" real,
        "Chaetoceros_bulbosus" real,
        "Chaetoceros_curvatus" real,
        "Chaetoceros_pendulus" real,
        "Climacodium_frauenfeldianum" real,
        "Cocconeis_fasciolata" real,
        "Codonella_galea" real,
        "Codonellopsis_gausii" real,
        "Codonellopsis_morchella" real,
        "Codonellopsis_orthoceras" real,
        "Codonellopsis_pusilla" real,
        "Corethron_inerme" real,
        "Corethron_pennatum" real,
        "Coscinodiscus_gigas" real,
        "Cymatocylis_calyciformis" real,
        "Cyttarocylis_ampulla" real,
        "Dactyliosolen_antarcticus" real,
        "Dactyliosolen_phuketensis" real,
        "Dactyliosolen_tenuijunctus" real,
        "Dadayiella_ganymedes" real,
        "Dictyocha_antarctica" real,
        "Dictyocha_fibula" real,
        "Dictyocha_speculum" real,
        "Dictyocysta_elegans" real,
        "Dictyocysta_mitra" real,
        "Dinophysis_acuminata" real,
        "Dinophysis_caudata" real,
        "Dinophysis_dens" real,
        "Dinophysis_tripos" real,
        "Ditylum_brightwellii" real,
        "Epiplocylis_undella" real,
        "Eucampia_antarctica" real,
        "Fragilariopsis_curta" real,
        "Fragilariopsis_doliolus" real,
        "Fragilariopsis_kerguelensis" real,
        "Gazelletta_hexanema" real,
        "Gonyaulax_polygramma" real,
        "Gonyaulax_scrippsia" real,
        "Guinardia_cylindrus" real,
        "Guinardia_flaccida" real,
        "Guinardia_striata" real,
        "Hemiaulus_hauckii" real,
        "Hemiaulus_membranaceus" real,
        "Hemiaulus_sinensis" real,
        "Leptocylindrus_danicus" real,
        "Leptocylindrus_mediterraneus" real,
        "Membraneis_challengeri" real,
        "Navicula_cristata" real,
        "Nitzschia_bicapitata" real,
        "Nitzschia_longissima" real,
        "Noctiluca_scintillans" real,
        "Octactis_octonaria" real,
        "Odontella_sinensis" real,
        "Ornithocercus_quadratus" real,
        "Oxytoxum_parvum" real,
        "Oxytoxum_scolopax" real,
        "Oxytoxum_subulatum" real,
        "Paralia_sulcata" real,
        "Phalacroma_doryphorum" real,
        "Planktoniella_sol" real,
        "Podolampas_antarcticus" real,
        "Podolampas_palmipes" real,
        "Podolampas_spinifera" real,
        "Proboscia_alata" real,
        "Proboscia_inermis" real,
        "Proboscia_truncata" real,
        "Prorocentrum_gracile" real,
        "Protoperidinium_grande" real,
        "Protoperidinium_granii" real,
        "Protoperidinium_oceanicum" real,
        "Pseudosolenia_calcar-avis" real,
        "Pterosperma_polygonum" real,
        "Ptychodiscus_noctiluca" real,
        "Pyrocystis_fusiformis" real,
        "Pyrocystis_hamulus" real,
        "Rhabdonella_amor" real,
        "Rhabdonella_apophysata" real,
        "Rhabdonella_spiralis" real,
        "Rhizosolenia_acuminata" real,
        "Rhizosolenia_bergonii" real,
        "Rhizosolenia_chunni" real,
        "Rhizosolenia_setigera" real,
        "Rhizosolenia_simplex" real,
        "Skeletonema_pseudocostatum" real,
        "Thalassionema_nitzschioides" real,
        "Thalassiosira_eccentrica" real,
        "Thalassiosira_oliveriana" real,
        "Thalassiothrix_antarctica" real,
        "Tintinnus_lususundae" real,
        "Trichodesmium_thiebautii" real,
        "Trichotoxon_reinboldii" real,
        "Tripos_Amphiceratium_biceps" real,
        "Tripos_Amphiceratium_extensus" real,
        "Tripos_Amphiceratium_fusus" real,
        "Tripos_Ceratium_belone" real,
        "Tripos_Ceratium_candelabrus" real,
        "Tripos_Ceratium_furca" real,
        "Tripos_Ceratium_incisus" real,
        "Tripos_Ceratium_kofoidii" real,
        "Tripos_Ceratium_lineatus" real,
        "Tripos_Ceratium_pentagonus" real,
        "Tripos_Ceratium_setaceus" real,
        "Tripos_Ceratium_teres" real,
        "Tripos_Poroceratium_gravidus" real,
        "Tripos_Tripoceratium_arietinus" real,
        "Tripos_Tripoceratium_axialis" real,
        "Tripos_Tripoceratium_brevis" real,
        "Tripos_Tripoceratium_carriensis" real,
        "Tripos_Tripoceratium_concilians" real,
        "Tripos_Tripoceratium_contortus" real,
        "Tripos_Tripoceratium_contrarius" real,
        "Tripos_Tripoceratium_declinatus" real,
        "Tripos_Tripoceratium_gibberus" real,
        "Tripos_Tripoceratium_hexacanthus" real,
        "Tripos_Tripoceratium_horridus" real,
        "Tripos_Tripoceratium_limulus" real,
        "Tripos_Tripoceratium_longipes" real,
        "Tripos_Tripoceratium_lunula" real,
        "Tripos_Tripoceratium_macroceros" real,
        "Tripos_Tripoceratium_massiliensis" real,
        "Tripos_Tripoceratium_muelleri" real,
        "Tripos_Tripoceratium_platycornis" real,
        "Tripos_Tripoceratium_ranipes" real,
        "Tripos_Tripoceratium_reflexus" real,
        "Tripos_Tripoceratium_scorpius" real,
        "Tripos_Tripoceratium_symmetricus" real,
        "Tripos_Tripoceratium_tenuis" real,
        "Tripos_Tripoceratium_trichoceros" real,
        "Tripos_Tripoceratium_vultur" real,
        "Tripos_cephalotus" real,
        "Tripos_deflexus" real,
        "Tripos_euarcuatus" real,
        geom geometry(Geometry,4326) CHECK (st_isvalid(geom))
      );

      CREATE INDEX cpr_phyto_species_gist_idx ON cpr_phyto_species USING GIST (geom);
    </sql>
  </changeSet>


  <changeSet author="talend" id="table_cpr_phyto_raw">
    <sql>
      CREATE TABLE cpr_phyto_raw (
        id bigserial PRIMARY KEY,
        "Route" text NOT NULL,
        "Latitude" double precision NOT NULL,
        "Longitude" double precision NOT NULL,
        "SampleDateUTC" timestamp without time zone NOT NULL,
        "Year" integer NOT NULL,
        "Month" integer NOT NULL,
        "Day" integer NOT NULL,
        "Time_24hr" text NOT NULL,
        "Acantharia" real,
        "Acanthoica_quattrospina" real,
        "Acanthostomella_cf._conicoides" real,
        "Acanthostomella_spp." real,
        "Actinocyclus_spp." real,
        "Actinopoda" real,
        "Alexandrium_spp." real,
        "Amphidinium_hadai" real,
        "Amphisolenia_bidentata" real,
        "Amphisolenia_spp." real,
        "Amphisolenia_thrinax" real,
        "Amphora_spp." real,
        "Amphorides_spp." real,
        "Ascampbelliella_spp." real,
        "Asterionella_spp." real,
        "Asterionellopsis_glacialis" real,
        "Asterionellopsis_spp." real,
        "Asteromphalus_hookeri" real,
        "Bacillaria_paxillifera" real,
        "Bacillaria_spp." real,
        "Bacteriastrum_delicatulum" real,
        "Bacteriastrum_spp." real,
        "Bellerochea_horologicalis" real,
        "Bellerochea_malleus" real,
        "Bellerochea_spp." real,
        "Biddulphia_spp." real,
        "Braarudosphaera_bigelowii" real,
        "Centric_diatom" real,
        "Centric_diatom_10-20um" real,
        "Centric_diatom_30-40um" real,
        "Centric_diatom_40-50um" real,
        "Cerataulina_spp." real,
        "Ceratium_tripos_type" real,
        "Ceratocorys_horrida" real,
        "Ceratocorys_spp." real,
        "Ceratoneis_closterium" real,
        "Chaetoceros_Hyalochaete" real,
        "Chaetoceros_Phaeoceros" real,
        "Chaetoceros_atlanticus" real,
        "Chaetoceros_brevis" real,
        "Chaetoceros_bulbosus" real,
        "Chaetoceros_cf._affinis" real,
        "Chaetoceros_coarctatus" real,
        "Chaetoceros_convolutus" real,
        "Chaetoceros_criophilus" real,
        "Chaetoceros_curvatus" real,
        "Chaetoceros_decipiens_lt_15um_cell_width" real,
        "Chaetoceros_densus" real,
        "Chaetoceros_dichaetus" real,
        "Chaetoceros_didymus" real,
        "Chaetoceros_eibenii" real,
        "Chaetoceros_lorenzianus" real,
        "Chaetoceros_messanense" real,
        "Chaetoceros_neglectus" real,
        "Chaetoceros_pendulus" real,
        "Chaetoceros_peruvianus" real,
        "Chaetoceros_peruvianus_lt_40um_cell_width" real,
        "Chaetoceros_peruvianus_gt_40um_cell_width" real,
        "Chaetoceros_resting_cyst" real,
        "Chaetoceros_socialis" real,
        "Chaetoceros_spp._lt_10um_cell_width" real,
        "Ciliate_Inc._tintinnid" real,
        "Climacocylis_spp." real,
        "Climacodium_frauenfeldianum" real,
        "Climacodium_spp." real,
        "Coccolithophore" real,
        "Coccolithophore_cf." real,
        "Cocconeis_fasciolata" real,
        "Cocconeis_spp." real,
        "Codonella_galea" real,
        "Codonella_spp." real,
        "Codonellopsis_gausii" real,
        "Codonellopsis_morchella" real,
        "Codonellopsis_orthoceras" real,
        "Codonellopsis_pusilla" real,
        "Codonellopsis_spp." real,
        "Corethron_inerme" real,
        "Corethron_pennatum" real,
        "Corethron_spp." real,
        "Coscinodiscus_gigas" real,
        "Coscinodiscus_spp." real,
        "Coscinodiscus_spp._gt_80um" real,
        "Coscinodiscus_spp._100-150um" real,
        "Coscinodiscus_spp._150-200um" real,
        "Coscinodiscus_spp._200-300um" real,
        "Coscinodiscus_spp._300-400um" real,
        "Coscinodiscus_spp._400-500um" real,
        "Coscinodiscus_spp._60-80um" real,
        "Cyanobacteria" real,
        "Cyanobacteria_coccoid_chain" real,
        "Cylindrial_diatom" real,
        "Cylindrotheca_spp." real,
        "Cymatocylis_calyciformis" real,
        "Cymatocylis_spp." real,
        "Cyttarocylis_ampulla" real,
        "Cyttarocylis_spp." real,
        "Dactyliosolen_antarcticus" real,
        "Dactyliosolen_cf._spp." real,
        "Dactyliosolen_phuketensis" real,
        "Dactyliosolen_spp." real,
        "Dactyliosolen_tenuijunctus" real,
        "Dadayiella_ganymedes" real,
        "Dadayiella_spp." real,
        "Daturella_spp." real,
        "Detonula_spp." real,
        "Dictyocha_antarctica" real,
        "Dictyocha_fibula" real,
        "Dictyocha_speculum" real,
        "Dictyocha_spp." real,
        "Dictyocysta_elegans" real,
        "Dictyocysta_mitra" real,
        "Dictyocysta_spp." real,
        "Dinoflagellate_cyst" real,
        "Dinophysis_acuminata" real,
        "Dinophysis_caudata" real,
        "Dinophysis_dens" real,
        "Dinophysis_spp." real,
        "Dinophysis_tripos" real,
        "Diploneis_spp." real,
        "Ditylum_brightwellii_lt_40um_width" real,
        "Ditylum_spp." real,
        "Entomoneis_spp." real,
        "Epiplocylis_spp." real,
        "Epiplocylis_undella" real,
        "Eucampia_antarctica" real,
        "Eucampia_spp." real,
        "Eucampia_spp._lt_100um_cell_length" real,
        "Eutintinnus_lususundae" real,
        "Eutintinnus_spp." real,
        "Favella_spp." real,
        "Filamentous_algae_branching" real,
        "Filamentous_algae_non_branching" real,
        "Flagellate" real,
        "Flagellate_lt_10um_fusiform" real,
        "Foraminifera" real,
        "Fragilaria_or_Fragilariopsis" real,
        "Fragilaria_spp." real,
        "Fragilariopsis_curta" real,
        "Fragilariopsis_doliolus" real,
        "Fragilariopsis_kerguelensis" real,
        "Fragilariopsis_separanda_or_rhombica" real,
        "Fragilariopsis_spp." real,
        "Gazelletta_hexanema" real,
        "Globigerinidae" real,
        "Globotoralia_spp." real,
        "Goniodomataceae" real,
        "Gonyaulax_polygramma" real,
        "Gonyaulax_scrippsae" real,
        "Gonyaulax_spp." real,
        "Grammatophora_spp." real,
        "Guinardia_cf._tubiformis" real,
        "Guinardia_cylindrus" real,
        "Guinardia_flaccida" real,
        "Guinardia_spp." real,
        "Guinardia_striata" real,
        "Gymnodinium_spp." real,
        "Gyrodinium_spp." real,
        "Gyrodinium_spp._20-40um" real,
        "Hemiaulus_hauckii" real,
        "Hemiaulus_membranaceus" real,
        "Hemiaulus_sinensis" real,
        "Hemiaulus_spp." real,
        "Lauderia_spp." real,
        "Leptocylindrus_cf._spp." real,
        "Leptocylindrus_danicus" real,
        "Leptocylindrus_mediterraneus" real,
        "Leptocylindrus_mediterraneus_with_flagellates" real,
        "Leptocylindrus_spp." real,
        "Licmophora_spp." real,
        "Lioloma_cf._spp." real,
        "Lioloma_spp." real,
        "Lithodesmium_spp." real,
        "Mastogloia_spp." real,
        "Melosira_cf._spp." real,
        "Melosira_spp." real,
        "Membraneis_challengeri" real,
        "Navicula_-_shaped" real,
        "Navicula_cf._lt_20um_length" real,
        "Navicula_cf._100-120um_length" real,
        "Navicula_cf._120-140um_length" real,
        "Navicula_cf._140-160um_length" real,
        "Navicula_cf._20-40um_length" real,
        "Navicula_cf._40-60um_length" real,
        "Navicula_cf._60-80um_length" real,
        "Navicula_cf._80-100um_length" real,
        "Navicula_cristata" real,
        "Nitzschia_bicapitata" real,
        "Nitzschia_cf._bicapitata" real,
        "Nitzschia_longissima" real,
        "Nitzschia_spp." real,
        "Noctiluca_scintillans" real,
        "Octactis_octonaria" real,
        "Octactis_spp." real,
        "Odontella_sinensis" real,
        "Odontella_spp." real,
        "Ornithocercus_quadratus" real,
        "Ornithocercus_spp." real,
        "Oxytoxum_parvum" real,
        "Oxytoxum_scolopax" real,
        "Oxytoxum_spp." real,
        "Oxytoxum_subulatum" real,
        "Paralia_sulcata" real,
        "Parundella_spp." real,
        "Pennate_diatom" real,
        "Pennate_diatom_lt_10um" real,
        "Pennate_diatom_gt_10um" real,
        "Pennate_diatom_gt_100um" real,
        "Pennate_diatom_10-25um" real,
        "Pennate_diatom_25-50um" real,
        "Pennate_diatom_75-100um" real,
        "Peridinium_spp." real,
        "Phaeocystis_spp._colony" real,
        "Phalacroma_doryphorum" real,
        "Planktoniella_sol" real,
        "Pleurosigma_or_Gyrosigma_spp." real,
        "Pleurosigma_spp._lt_150um" real,
        "Podolampas_palmipes" real,
        "Podolampas_spinifera" real,
        "Podolampas_spp." real,
        "Podolampus_antarcticus" real,
        "Proboscia_alata" real,
        "Proboscia_inermis" real,
        "Proboscia_spp." real,
        "Proboscia_truncata" real,
        "Prorocentrum_gracile" real,
        "Prorocentrum_spp." real,
        "Protoperidinium_grande" real,
        "Protoperidinium_granii" real,
        "Protoperidinium_oceanicum" real,
        "Protoperidinium_oceanicum_or_oblongum" real,
        "Protoperidinium_spp." real,
        "Protozoa" real,
        "Psammodictyon_cf._spp." real,
        "Pseudo-nitzschia_delicatisima_complex_le_3um" real,
        "Pseudo-nitzschia_seriata_complex_gt_3um" real,
        "Pseudo-nitzschia_spp." real,
        "Pseudosolenia_calcar-avis" real,
        "Pterosperma_polygonum" real,
        "Ptychodiscus_noctiluca" real,
        "Pyrocystis_fusiformis" real,
        "Pyrocystis_hamulus" real,
        "Pyrocystis_spp." real,
        "Pyrophacus_spp." real,
        "Pyrophacus_vancampoae_cyst" real,
        "Radiolarian" real,
        "Rhabdonella_amor" real,
        "Rhabdonella_apophysata" real,
        "Rhabdonella_spiralis" real,
        "Rhabdonella_spp." real,
        "Rhizosolenia_acuminata" real,
        "Rhizosolenia_bergonii" real,
        "Rhizosolenia_chunii" real,
        "Rhizosolenia_hebetata_f._semispina" real,
        "Rhizosolenia_imbricata_group" real,
        "Rhizosolenia_setigera" real,
        "Rhizosolenia_setigera_group" real,
        "Rhizosolenia_simplex" real,
        "Rhizosolenia_spp." real,
        "Sagenoarium_spp." real,
        "Salpingella_spp." real,
        "Scrippsiella_spp." real,
        "Silicoflagellate" real,
        "Silicoflagellate_4_points" real,
        "Silicoflagellate_6_points" real,
        "Skeletonema_pseudocostatum" real,
        "Skeletonema_spp." real,
        "Steenstrupiella_cf._steenstrupii" real,
        "Steenstrupiella_spp." real,
        "Stephanopyxis_spp." real,
        "Striatella_spp." real,
        "Thalassionema_nitzschioides" real,
        "Thalassionema_spp." real,
        "Thalassionema_spp._lt_100um_length" real,
        "Thalassionema_spp._gt_100um_length" real,
        "Thalassiosira_eccentrica" real,
        "Thalassiosira_oliveriana" real,
        "Thalassiosira_spp." real,
        "Thalassiosira_spp._lt_10um" real,
        "Thalassiosira_spp._10-20um" real,
        "Thalassiosira_spp._20-40um" real,
        "Thalassiosira_spp._40-60um" real,
        "Thalassiosira_spp._60-80um" real,
        "Thalassiothrix_antarctica" real,
        "Thalassiothrix_cf._spp." real,
        "Thalassiothrix_spp." real,
        "Theoperidae" real,
        "Tintinnidae" real,
        "Tintinnopsis_spp." real,
        "Trichodesmium_spp." real,
        "Trichodesmium_thiebautii" real,
        "Trichotoxon_reinboldii" real,
        "Trigonium_spp." real,
        "Tripos_arietinus" real,
        "Tripos_axialis" real,
        "Tripos_belone" real,
        "Tripos_biceps" real,
        "Tripos_brevis" real,
        "Tripos_candelabrus" real,
        "Tripos_carriensis" real,
        "Tripos_cephalotus" real,
        "Tripos_concilians" real,
        "Tripos_contortus" real,
        "Tripos_contrarius" real,
        "Tripos_declinatus" real,
        "Tripos_deflexus" real,
        "Tripos_euarcuatus" real,
        "Tripos_extensus" real,
        "Tripos_furca" real,
        "Tripos_furca_type" real,
        "Tripos_fusus" real,
        "Tripos_fusus_type" real,
        "Tripos_fusus_or_extensus" real,
        "Tripos_gibberus" real,
        "Tripos_gravidus" real,
        "Tripos_gravidus_type" real,
        "Tripos_hexacanthus" real,
        "Tripos_horridus" real,
        "Tripos_incisus" real,
        "Tripos_kofoidii" real,
        "Tripos_limulus" real,
        "Tripos_lineatus" real,
        "Tripos_lineatus_or_pentagonus_complex" real,
        "Tripos_longipes" real,
        "Tripos_lunula" real,
        "Tripos_macroceros" real,
        "Tripos_macroceros_type" real,
        "Tripos_massiliensis" real,
        "Tripos_muelleri" real,
        "Tripos_muelleri_type" real,
        "Tripos_pentagonus" real,
        "Tripos_platycornis" real,
        "Tripos_ranipes" real,
        "Tripos_reflexus" real,
        "Tripos_setaceus" real,
        "Tripos_spp." real,
        "Tripos_symmetricus" real,
        "Tripos_tenuis" real,
        "Tripos_teres" real,
        "Tripos_trichoceros" real,
        "Tripos_vultur" real,
        "Undella_spp." real,
        "Unid_diatom" real,
        "Unid_dinoflagellate_lt_10um" real,
        "Unid_dinoflagellate_gt_10um" real,
        "Unid_dinoflagellate_10-30um" real,
        "Unid_dinoflagellate_30-50um" real,
        "Xystonella_spp." real,
        "Xystonellopsis_spp." real,
        geom geometry(Geometry,4326) CHECK (st_isvalid(geom))
      );

      CREATE INDEX cpr_phyto_raw_gist_idx ON cpr_phyto_raw USING GIST (geom);
    </sql>
  </changeSet>


  <changeSet author="talend" id="table_cpr_phyto_raw_flat">
    <sql>
      CREATE TABLE cpr_phyto_raw_flat (
        id bigserial PRIMARY KEY,
        "Route" text,
        start_port text,
        end_port text,
        route_frequency text,
        route_start_date text,
        vessel_name text,
        trip_code text,
        "Longitude" double precision NOT NULL,
        "Latitude" double precision NOT NULL,
        "SampleDateUTC" timestamp without time zone NOT NULL,
        taxon_name text,
        family text,
        genus text,
        species text,
        taxon_group text,
        caab_code bigint,
        taxon_start_date text,
        taxon_per_m3 real,
        phyto_comments text,
        acknowledgements text,
        geom geometry(Geometry,4326) CHECK (st_isvalid(geom))
      );

      CREATE INDEX cpr_phyto_raw_flat_gist_idx ON cpr_phyto_raw_flat USING GIST (geom);
    </sql>
  </changeSet>


  <changeSet author="talend" id="table_cpr_phyto_taxon_changelog">
    <sql>
      CREATE TABLE cpr_phyto_taxon_changelog (
        id bigserial PRIMARY KEY,
        taxon_name text NOT NULL UNIQUE,
        taxon_start_date text,
        first_occurrence text,
        parent_taxon_name text,
        training text,
        comments text
      );

      CREATE INDEX cpr_phyto_taxon_changelog_taxon_name_idx ON cpr_phyto_taxon_changelog (taxon_name);
    </sql>
  </changeSet>


  <changeSet author="talend" id="drop_map_tables">
    <sql>
      DROP TABLE IF EXISTS cpr_phyto_htg_map CASCADE ;
      DROP TABLE IF EXISTS cpr_phyto_genus_map CASCADE ;
      DROP TABLE IF EXISTS cpr_phyto_species_map CASCADE ;
      DROP TABLE IF EXISTS cpr_phyto_raw_map CASCADE ;
    </sql>
  </changeSet>


  <changeSet author="talend" id="view_cpr_phyto_htg_map" runOnChange="true">
    <sql>
      DROP VIEW IF EXISTS cpr_phyto_htg_map CASCADE;
      CREATE VIEW cpr_phyto_htg_map AS
        SELECT * FROM cpr_phyto_htg ;
    </sql>
  </changeSet>


  <changeSet author="talend" id="view_cpr_phyto_genus_map" runOnChange="true">
    <sql>
      DROP VIEW IF EXISTS cpr_phyto_genus_map CASCADE;
      CREATE VIEW cpr_phyto_genus_map AS
        SELECT * FROM cpr_phyto_genus ;
    </sql>
  </changeSet>


  <changeSet author="talend" id="view_cpr_phyto_species_map" runOnChange="true">
    <sql>
      DROP VIEW IF EXISTS cpr_phyto_species_map CASCADE;
      CREATE VIEW cpr_phyto_species_map AS
        SELECT * FROM cpr_phyto_species ;
    </sql>
  </changeSet>


  <changeSet author="talend" id="view_cpr_phyto_raw_map" runOnChange="true">
    <sql>
      DROP VIEW IF EXISTS cpr_phyto_raw_map CASCADE;
      CREATE VIEW cpr_phyto_raw_map AS
        SELECT * FROM cpr_phyto_raw ;
    </sql>
  </changeSet>


  <changeSet author="talend" id="view_cpr_phyto_raw_flat_map" runOnChange="true">
    <sql>
      DROP VIEW IF EXISTS cpr_phyto_raw_flat_map CASCADE;
      CREATE VIEW cpr_phyto_raw_flat_map AS
        SELECT r.*,
               c.first_occurrence,
               c.parent_taxon_name,
               c.training,
               c.comments
        FROM cpr_phyto_raw_flat r LEFT JOIN
             cpr_phyto_taxon_changelog c USING (taxon_name, taxon_start_date) ;
    </sql>
  </changeSet>

</databaseChangeLog>
