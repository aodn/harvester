<?xml version="1.0" encoding="UTF-8"?>
<talendfile:ProcessType xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:talendfile="platform:/resource/org.talend.model/model/TalendFile.xsd" defaultContext="argo_dev">
  <context confirmationNeeded="false" name="argo_dev">
    <contextParameter comment="" name="Destination_Database" prompt="Destination_Database?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="harvest?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory"/>
    <contextParameter comment="" name="Destination_Login" prompt="Destination_Login?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="argo"/>
    <contextParameter comment="" name="Destination_Password" prompt="Destination_Password?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_Password" value="bQdsCI2gjYQ="/>
    <contextParameter comment="" name="Destination_Port" prompt="Destination_Port?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="5432"/>
    <contextParameter comment="" name="Destination_Schema" prompt="Destination_Schema?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="argo"/>
    <contextParameter comment="" name="Destination_Server" prompt="Destination_Server?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="10.11.12.13"/>
    <contextParameter comment="" name="logDir" prompt="logDir?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="paramFile" prompt="paramFile?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="jobName" prompt="jobName?" promptNeeded="false" repositoryContextId="_BEs4sAY4EeK4RLc2ENsRtg" type="id_String" value="argo"/>
  </context>
  <context confirmationNeeded="false" name="Default">
    <contextParameter comment="" name="Destination_Database" prompt="Destination_Database?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="harvest?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory"/>
    <contextParameter comment="" name="Destination_Login" prompt="Destination_Login?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="argo"/>
    <contextParameter comment="" name="Destination_Password" prompt="Destination_Password?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_Password" value="bQdsCI2gjYQ="/>
    <contextParameter comment="" name="Destination_Port" prompt="Destination_Port?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="5432"/>
    <contextParameter comment="" name="Destination_Schema" prompt="Destination_Schema?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="argo"/>
    <contextParameter comment="" name="Destination_Server" prompt="Destination_Server?" promptNeeded="false" repositoryContextId="_zBQGAFo_EeK1xoAXx1MZbA" type="id_String" value="10.11.12.13"/>
    <contextParameter comment="" name="logDir" prompt="logDir?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="paramFile" prompt="paramFile?" promptNeeded="false" repositoryContextId="_plzQsAM4EeS7uLOnmFTdhQ" type="id_String" value="null"/>
    <contextParameter comment="" name="jobName" prompt="jobName?" promptNeeded="false" repositoryContextId="_BEs4sAY4EeK4RLc2ENsRtg" type="id_String" value="argo"/>
  </context>
  <parameters>
    <elementParameter field="TEXT" name="JOB_RUN_VM_ARGUMENTS" value=" -Xms256M -Xmx1024M"/>
    <elementParameter field="CHECK" name="JOB_RUN_VM_ARGUMENTS_OPTION" value="false"/>
    <elementParameter field="TEXT" name="SCREEN_OFFSET_X" value="0"/>
    <elementParameter field="TEXT" name="SCREEN_OFFSET_Y" value="0"/>
    <elementParameter field="TEXT" name="SCHEMA_OPTIONS" value="none"/>
    <elementParameter field="TEXT" name="OEM_CUSTOM_ATTRIBUTE" value=""/>
    <elementParameter field="TEXT" name="HADOOP_APP_PATH" value=""/>
    <elementParameter field="TEXT" name="JOBID_FOR_OOZIE" value=""/>
    <elementParameter field="CHECK" name="IMPLICITCONTEXT_USE_PROJECT_SETTINGS" value="true"/>
    <elementParameter field="CHECK" name="STATANDLOG_USE_PROJECT_SETTINGS" value="true"/>
    <elementParameter field="FILE" name="IMPLICIT_TCONTEXTLOAD_FILE" value="&quot;&quot;"/>
    <elementParameter field="TEXT" name="FIELDSEPARATOR" value="&quot;&quot;"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION_IMPLICIT_CONTEXT" value=""/>
    <elementParameter field="CHECK" name="DISABLE_WARNINGS" value="false"/>
    <elementParameter field="CHECK" name="DISABLE_INFO" value="false"/>
    <elementParameter field="DIRECTORY" name="FILE_PATH" value="&quot;/home/dan/Work/IMOS/src/harvesters/workspace/.metadata&quot;"/>
    <elementParameter field="TECHNICAL" name="ENCODING:ENCODING_TYPE" value="ISO-8859-15"/>
    <elementParameter field="CLOSED_LIST" name="DB_VERSION" value="ojdbc14-10g.jar"/>
    <routinesParameter id="_ybXQEAMgEeShseTX0YMvcA" name="DataOperation"/>
    <routinesParameter id="_ybRJcAMgEeShseTX0YMvcA" name="GeoOperation"/>
    <routinesParameter id="_ybOtMAMgEeShseTX0YMvcA" name="GeometryOperation"/>
    <routinesParameter id="_ybFjQAMgEeShseTX0YMvcA" name="GeometryUtility"/>
    <routinesParameter id="_ybZsUAMgEeShseTX0YMvcA" name="Mathematical"/>
    <routinesParameter id="_ybSXkAMgEeShseTX0YMvcA" name="Numeric"/>
    <routinesParameter id="_ybP7UAMgEeShseTX0YMvcA" name="OpenStreetMap"/>
    <routinesParameter id="_ybUz0AMgEeShseTX0YMvcA" name="Relational"/>
    <routinesParameter id="_yba6cAMgEeShseTX0YMvcA" name="StringHandling"/>
    <routinesParameter id="_ybYeMAMgEeShseTX0YMvcA" name="TalendDataGenerator"/>
    <routinesParameter id="_ybWB8AMgEeShseTX0YMvcA" name="TalendDate"/>
    <routinesParameter id="_ybTlsAMgEeShseTX0YMvcA" name="TalendString"/>
    <routinesParameter id="_BzxlsElWEeK5TPMSOHM6dA" name="ArgoUtils"/>
    <routinesParameter id="_cRn34BQsEeKRFb0vPU_LNg" name="DAPUtils"/>
    <routinesParameter id="_IMfY4Dp8EeKYTu4DLH4cKg" name="NetCDFUtils"/>
  </parameters>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="128" posY="64">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_1"/>
    <elementParameter field="CHECK" name="START" value="true"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/home/craigj/TOS_DI-r96646-V5.1.3/workspace/changelog.xml&quot;"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xA;&lt;databaseChangeLog &#xA;    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;&#xA;    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#xA;    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1370230075940-13&quot;>&#xA;        &lt;createTable tableName=&quot;profile_position&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;data_centre&quot; type=&quot;VARCHAR(2)&quot;/>&#xA;            &lt;column name=&quot;platform_number&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;cycle_number&quot; type=&quot;int4&quot;/>&#xA;            &lt;column name=&quot;direction&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;data_mode&quot; type=&quot;char(1)&quot;/>&#xA;        &lt;/createTable>&#xA;&#xA;        &lt;sql>select AddGeometryColumn('profile_position','position',4326,'GEOMETRY',2)&lt;/sql>&#xA;&#xA;&#x9;&lt;sql>create index profile_position_position_gist ON profile_position USING GIST (position)&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1370230075940-13-1&quot;>&#xA;&#x9;&lt;addPrimaryKey columnNames=&quot;file_id, profile_no&quot; constraintName=&quot;profile_position_pk&quot; tableName=&quot;profile_position&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;!-- Make sure only valid geometries can be inserted -->&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;8c9d7380-7807-11e3-981f-0800200c9a66&quot;>&#xA;&#x9;&lt;sql>ALTER TABLE profile_position ADD CHECK (ST_IsValid(position))&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;!-- Create a view containing all australian floats. -->&#xA;    &lt;!-- Australian floats are floats that belong to the CSIRO or that have passed through -->&#xA;    &lt;!-- the Australian region -->&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;370230075940-13&quot;>&#xA;        &lt;createView viewName=&quot;australian_floats&quot;>&#xA;            select distinct platform_number&#xA;              from profile_position&#xA;             where data_centre = 'CS'&#xA;                or position &amp;amp;&amp;amp; ST_SetSRID(ST_MakeBox2D(ST_Point(90, -90), ST_Point(180, 0)),4326); &#xA;&#x9;&lt;/createView>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;updateHarvestTypeValues2&quot;>&#xA;    &lt;sql splitStatements=&quot;true&quot;>&#xA;update file_harvest set harvest_type = 'POSITION' where harvest_type = 'position';&#xA;&#xA;insert into file_harvest (file_id, harvest_type, last_moddate_harvested,&#xA;last_change_type, last_change_run)&#xA;   select distinct on (file_id) file_id, 'ARGOPLAT',&#xA;last_moddate_harvested, null, null&#xA;     from file_harvest&#xA;    where harvest_type is null&#xA;      and exists (select 1 from indexed_file if where if.id = file_id&#xA;and url like '%_meta.nc')&#xA;    order by file_id, last_moddate_harvested desc;&#xA;&#xA;insert into file_harvest (file_id, harvest_type, last_moddate_harvested,&#xA;last_change_type, last_change_run)&#xA;   select distinct on (file_id) file_id, 'ARGOPROF',&#xA;last_moddate_harvested, null, null&#xA;     from file_harvest&#xA;    where harvest_type is null&#xA;      and exists (select 1 from indexed_file if where if.id = file_id&#xA;and url like '%profiles/%.nc')&#xA;    order by file_id, last_moddate_harvested desc;&#xA;&#xA;delete from file_harvest where harvest_type is null;&#xA;    &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;&lt;/databaseChangeLog> "/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <elementParameter field="CHECK" name="INFORMATION" value="false"/>
    <elementParameter field="MEMO" name="COMMENT" value=""/>
    <elementParameter field="CHECK" name="VALIDATION_RULES" value="false"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="384" posY="64">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_2"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-4&quot;>&#xA;        &lt;createTable tableName=&quot;platform_metadata&quot;>&#xA;            &lt;column autoIncrement=&quot;true&quot; name=&quot;id&quot; type=&quot;bigserial&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;platform_metadata_id_pk&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;/>&#xA;            &lt;column name=&quot;data_type&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;format_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;handbook_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;date_creation&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;date_update&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;platform_number&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;ptt&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;trans_system&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;trans_system_id&quot; type=&quot;VARCHAR(32)&quot;/>&#xA;            &lt;column name=&quot;trans_frequency&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;trans_repetition&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;positioning_system&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;clock_drift&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;platform_model&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;platform_maker&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;inst_reference&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;wmo_inst_type&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;direction&quot; type=&quot;VARCHAR(1)&quot;/>&#xA;            &lt;column name=&quot;project_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;data_centre&quot; type=&quot;VARCHAR(2)&quot;/>&#xA;            &lt;column name=&quot;pi_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;anomaly&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;launch_date&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;launch_latitude&quot; type=&quot;FLOAT8(17)&quot;/>&#xA;            &lt;column name=&quot;launch_longitude&quot; type=&quot;FLOAT8(17)&quot;/>&#xA;            &lt;column name=&quot;launch_qc&quot; type=&quot;VARCHAR(1)&quot;/>&#xA;            &lt;column name=&quot;start_date&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;start_date_qc&quot; type=&quot;VARCHAR(1)&quot;/>&#xA;            &lt;column name=&quot;deploy_platform&quot; type=&quot;VARCHAR(32)&quot;/>&#xA;            &lt;column name=&quot;deploy_mission&quot; type=&quot;VARCHAR(32)&quot;/>&#xA;            &lt;column name=&quot;deploy_available_profile_id&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;end_mission_date&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;end_mission_status&quot; type=&quot;VARCHAR(1)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-5&quot;>&#xA;        &lt;createTable tableName=&quot;platform_nominal_cycle&quot;>&#xA;            &lt;column autoIncrement=&quot;true&quot; name=&quot;id&quot; type=&quot;bigserial&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;platform_nominal_cycle_id_pk&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;/>&#xA;            &lt;column name=&quot;cycles_no&quot; type=&quot;int4&quot;/>&#xA;            &lt;column name=&quot;repetition_rate&quot; type=&quot;int4&quot;/>&#xA;            &lt;column name=&quot;cycle_time&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;parking_time&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;descending_profiling_time&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;ascending_profiling_time&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;surface_time&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;parking_pressure&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;deepest_pressure&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;deepest_pressure_descending&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-6&quot;>&#xA;        &lt;createTable tableName=&quot;platform_params&quot;>&#xA;            &lt;column autoIncrement=&quot;true&quot; name=&quot;id&quot; type=&quot;bigserial&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;platform_params_id_pk&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;/>&#xA;            &lt;column name=&quot;param_no&quot; type=&quot;int4&quot;/>&#xA;            &lt;column name=&quot;sensor&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;sensor_maker&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;sensor_model&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;sensor_serial_no&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;sensor_units&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;sensor_accuracy&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;sensor_resolution&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;parameter&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;predeployment_calib_equation&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;predeployment_calib_coefficient&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;predeployment_calib_comment&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354481764331-24&quot;>&#xA;        &lt;createIndex indexName=&quot;platform_metadata_file_id_idx&quot; tableName=&quot;platform_metadata&quot; unique=&quot;true&quot;>&#xA;            &lt;column name=&quot;file_id&quot;/>&#xA;        &lt;/createIndex>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354481764331-25&quot;>&#xA;        &lt;createIndex indexName=&quot;platform_nominal_cycle_file_id_idx&quot; tableName=&quot;platform_nominal_cycle&quot; unique=&quot;false&quot;>&#xA;            &lt;column name=&quot;file_id&quot;/>&#xA;        &lt;/createIndex>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354481764331-26&quot;>&#xA;        &lt;createIndex indexName=&quot;platform_params_file_id_idx&quot; tableName=&quot;platform_params&quot; unique=&quot;false&quot;>&#xA;            &lt;column name=&quot;file_id&quot;/>&#xA;        &lt;/createIndex>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354481764331-27&quot;>&#xA;&#x9;&lt;sql>&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN sensor TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN sensor_maker TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN sensor_model TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN sensor_serial_no TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN sensor_units TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN parameter TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN predeployment_calib_equation TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN predeployment_calib_coefficient TYPE text;&#xA;&#x9;&#x9;ALTER TABLE platform_params ALTER COLUMN predeployment_calib_comment TYPE text;&#xA;&#x9;&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <elementParameter field="CHECK" name="INFORMATION" value="false"/>
    <elementParameter field="MEMO" name="COMMENT" value=""/>
    <elementParameter field="CHECK" name="VALIDATION_RULES" value="false"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="608" posY="64">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_3"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-7&quot;>&#xA;        &lt;createTable tableName=&quot;profile_general&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;platform_number&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;project_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;pi_name&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;cycle_number&quot; type=&quot;int4&quot;/>&#xA;            &lt;column name=&quot;direction&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;data_centre&quot; type=&quot;VARCHAR(2)&quot;/>&#xA;            &lt;column name=&quot;dc_reference&quot; type=&quot;VARCHAR(32)&quot;/>&#xA;            &lt;column name=&quot;data_state_indicator&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;data_mode&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;inst_reference&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;wmo_inst_type&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;juld&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;juld_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;juld_location&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;latitude&quot; type=&quot;FLOAT8(17)&quot;/>&#xA;            &lt;column name=&quot;longitude&quot; type=&quot;FLOAT8(17)&quot;/>&#xA;            &lt;column name=&quot;position_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;positioning_system&quot; type=&quot;VARCHAR(8)&quot;/>&#xA;            &lt;column name=&quot;profile_pres_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;profile_temp_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;profile_psal_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;profile_doxy_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;profile_temp_doxy_qc&quot; type=&quot;char(1)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-7-1&quot;>&#xA;        &lt;sql>select AddGeometryColumn('profile_general','position',4326,'GEOMETRY',2)&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-7-2&quot;>&#xA;        &lt;sql>CREATE INDEX profile_general_position_gist ON profile_general USING GIST (position)&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;!-- Make sure only valid geometries can be inserted -->&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;bc98f860-7808-11e3-981f-0800200c9a66&quot;>&#xA;  &lt;sql>ALTER TABLE profile_general ADD CHECK (ST_IsValid(position))&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-13&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no&quot; constraintName=&quot;profile_general_pkey&quot; tableName=&quot;profile_general&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-8&quot;>&#xA;        &lt;createTable tableName=&quot;profile_history&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;history_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;history_institution&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;history_step&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;history_software&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;history_software_release&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;history_reference&quot; type=&quot;VARCHAR(64)&quot;/>&#xA;            &lt;column name=&quot;history_date&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;history_action&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;history_parameter&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;history_start_pres&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;history_stop_pres&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;history_previous_value&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;history_qctest&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-14&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, history_no, profile_no&quot; constraintName=&quot;profile_history_pkey&quot; tableName=&quot;profile_history&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-9&quot;>&#xA;        &lt;createTable tableName=&quot;profile_measurements&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;level_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;pres&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;pres_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;pres_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;pres_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;pres_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;temp_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;temp_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;psal&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;psal_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;psal_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;psal_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;psal_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;doxy&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;doxy_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;doxy_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;doxy_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;doxy_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp_doxy&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp_doxy_adjusted&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;            &lt;column name=&quot;temp_doxy_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;temp_doxy_adjusted_qc&quot; type=&quot;char(1)&quot;/>&#xA;            &lt;column name=&quot;temp_doxy_adjusted_error&quot; type=&quot;FLOAT4(8,8)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-15&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no, level_no&quot; constraintName=&quot;profile_measurements_pkey&quot; tableName=&quot;profile_measurements&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-10&quot;>&#xA;        &lt;createTable tableName=&quot;profile_metadata&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;profile_metadata_pkey&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;data_type&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;format_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;handbook_version&quot; type=&quot;VARCHAR(4)&quot;/>&#xA;            &lt;column name=&quot;reference_date_time&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;date_creation&quot; type=&quot;TIMESTAMP&quot;/>&#xA;            &lt;column name=&quot;date_update&quot; type=&quot;TIMESTAMP&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-11&quot;>&#xA;        &lt;createTable tableName=&quot;profile_param_calibration&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;calib_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;param_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;parameter&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;            &lt;column name=&quot;scientific_calib_equation&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;scientific_calib_coefficient&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;scientific_calib_comment&quot; type=&quot;VARCHAR(256)&quot;/>&#xA;            &lt;column name=&quot;calibration_date&quot; type=&quot;TIMESTAMP&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-16&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no, calib_no, param_no&quot; constraintName=&quot;profile_param_calibration_pkey&quot; tableName=&quot;profile_param_calibration&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-12&quot;>&#xA;        &lt;createTable tableName=&quot;profile_params&quot;>&#xA;            &lt;column name=&quot;file_id&quot; type=&quot;int8&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;profile_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;param_no&quot; type=&quot;int4&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;station_parameters&quot; type=&quot;VARCHAR(16)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354478507434-17&quot;>&#xA;        &lt;addPrimaryKey columnNames=&quot;file_id, profile_no, param_no&quot; constraintName=&quot;profile_params_pkey&quot; tableName=&quot;profile_params&quot;/>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;alter_column_size&quot;>&#xA;  &lt;sql>&#xA;    ALTER TABLE profile_param_calibration ALTER COLUMN parameter TYPE text;&#xA;  &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;alter_add_columns_B*files&quot;>&#xA;  &lt;sql>&#xA;  ALTER TABLE profile_general ADD COLUMN profile_c1phase_doxy_qc character (1);&#xA;  ALTER TABLE profile_general ADD COLUMN profile_c2phase_doxy_qc character (1);&#xA;  &#xA;  ALTER TABLE profile_measurements ADD COLUMN c1phase_doxy real;&#xA;  ALTER TABLE profile_measurements ADD COLUMN c1phase_doxy_qc character (1);&#xA;  ALTER TABLE profile_measurements ADD COLUMN c2phase_doxy real;&#xA;  ALTER TABLE profile_measurements ADD COLUMN c2phase_doxy_qc character (1);&#xA;  &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;alter_add_columns_nPosSys_recreate_idx&quot;>&#xA;  &lt;sql>&#xA;    DROP INDEX platform_metadata_file_id_idx;&#xA;    CREATE INDEX platform_metadata_file_id_idx ON platform_metadata USING btree (file_id);&#xA;    ALTER TABLE platform_metadata ADD COLUMN n_positioning_system integer;&#xA;  &lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;alter_add_columns_nitrate_ph_files&quot;>&#xA;  &lt;sql>&#xA;  ALTER TABLE profile_general ADD COLUMN profile_nitrate_qc character (1);&#xA;  ALTER TABLE profile_general ADD COLUMN profile_ph_in_situ_total_qc character (1);&#xA;  &#xA;  ALTER TABLE profile_measurements ADD COLUMN nitrate real;&#xA;  ALTER TABLE profile_measurements ADD COLUMN nitrate_qc character (1);&#xA;  ALTER TABLE profile_measurements ADD COLUMN nitrate_adjusted real;&#xA;  ALTER TABLE profile_measurements ADD COLUMN nitrate_adjusted_qc character (1);&#xA;&#xA;  ALTER TABLE profile_measurements ADD COLUMN ph_in_situ_total real;&#xA;  ALTER TABLE profile_measurements ADD COLUMN ph_in_situ_total_qc character (1);&#xA;  ALTER TABLE profile_measurements ADD COLUMN ph_in_situ_total_adjusted real;&#xA;  ALTER TABLE profile_measurements ADD COLUMN ph_in_situ_total_adjusted_qc character (1);&#xA;  &lt;/sql>&#xA;&lt;/changeSet>&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <elementParameter field="CHECK" name="INFORMATION" value="false"/>
    <elementParameter field="MEMO" name="COMMENT" value=""/>
    <elementParameter field="CHECK" name="VALIDATION_RULES" value="false"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="128" posY="256">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_4"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354485086817-1&quot;>&#xA;        &lt;createTable tableName=&quot;data_centre&quot;>&#xA;            &lt;column name=&quot;code&quot; type=&quot;VARCHAR(2)&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;data_centre_pk&quot;/>&#xA;            &lt;/column>&#xA;            &lt;column name=&quot;name&quot; type=&quot;VARCHAR(20)&quot;/>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;craigj&quot; id=&quot;argo-platform-views-1&quot;>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;AO&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;aoml&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;BO&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;bodc&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;CS&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;csiro&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;HZ&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;csio&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;IF&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;ifremer&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;IN&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;incois&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;JM&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;jamstec&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;JA&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;jma&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;KM&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;kma&quot;/>&#xA;        &lt;/insert>&#xA;        &lt;insert tableName=&quot;data_centre&quot;>&#xA;             &lt;column name=&quot;code&quot; value=&quot;KO&quot;/>&#xA;             &lt;column name=&quot;name&quot; value=&quot;kordi&quot;/>&#xA;        &lt;/insert>    &#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354485086817-15&quot;>&#xA;        &lt;createTable tableName=&quot;region&quot;>&#xA;            &lt;column name=&quot;name&quot; type=&quot;VARCHAR(30)&quot;>&#xA;                &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; primaryKeyName=&quot;region_pk&quot;/>&#xA;            &lt;/column>&#xA;        &lt;/createTable>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;argo-platform-views-2&quot;>&#xA;        &lt;sql>SELECT AddGeometryColumn( 'region', 'geom', 4326, 'GEOMETRY', 2);&lt;/sql>&#xA;        &lt;sql>CREATE INDEX region_geom_idx  ON region  USING gist  (geom);&lt;/sql>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;argo-platform-views-3&quot;>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;Western Australia&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E610000001000000050000000000000000805B4000000000000034C00000000000005E4000000000000034C00000000000005E4000000000008042C00000000000805B4000000000008042C00000000000805B4000000000000034C0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;South Australia&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E610000001000000050000000000000000005E400000000000003EC000000000008061400000000000003EC0000000000080614000000000008042C00000000000005E4000000000008042C00000000000005E400000000000003EC0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;New South Wales&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000010000000500000000000000008061400000000000003EC000000000006063400000000000003EC0000000000060634000000000008046C0000000000080614000000000008046C000000000008061400000000000003EC0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;Great Barrier Reef&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000010000000500000000000000002062400000000000002EC000000000006063400000000000002EC000000000006063400000000000003EC000000000002062400000000000003EC000000000002062400000000000002EC0&quot;/>&#xA;            &lt;/insert>&#xA;            &lt;insert tableName=&quot;region&quot;>&#xA;                 &lt;column name=&quot;name&quot; value=&quot;BlueWater&quot;/>&#xA;                 &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000050000000500000000000000008066C0000000000080564000000000008066400000000000805640000000000080664000000000008056C000000000008066C000000000008056C000000000008066C00000000000805640050000000000000000805B4000000000000034C00000000000005E4000000000000034C00000000000005E4000000000008042C00000000000805B4000000000008042C00000000000805B4000000000000034C0050000000000000000005E400000000000003EC000000000008061400000000000003EC0000000000080614000000000008042C00000000000005E4000000000008042C00000000000005E400000000000003EC00500000000000000008061400000000000003EC000000000006063400000000000003EC0000000000060634000000000008046C0000000000080614000000000008046C000000000008061400000000000003EC00500000000000000002062400000000000002EC000000000006063400000000000002EC000000000006063400000000000003EC000000000002062400000000000003EC000000000002062400000000000002EC0&quot;/>&#xA;            &lt;/insert>    &#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;!-- Make sure only valid geometries can be inserted -->&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;fe0adb50-7809-11e3-981f-0800200c9a66&quot;>&#xA;        &lt;update tableName=&quot;region&quot;>&#xA;             &lt;column name=&quot;geom&quot; value=&quot;0103000020E6100000020000000500000000000000008066C0000000000080564000000000008066400000000000805640000000000080664000000000008056C000000000008066C000000000008056C000000000008066C000000000008056400E00000000000000008061400000000000003EC00000000000005E400000000000003EC00000000000005E4000000000000034C00000000000805B4000000000000034C00000000000805B4000000000008042C00000000000005E4000000000008042C0000000000080614000000000008042C0000000000080614000000000008046C0000000000060634000000000008046C000000000006063400000000000003EC000000000006063400000000000002EC000000000002062400000000000002EC000000000002062400000000000003EC000000000008061400000000000003EC0&quot;/>&#xA;             &lt;where>name='BlueWater'&lt;/where>&#xA;        &lt;/update>&#xA;&#xA;        &lt;sql>ALTER TABLE region ADD CHECK (ST_IsValid(geom))&lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;argo-platform-views-4&quot;>&#xA;        &lt;createProcedure>&#xA;             CREATE OR REPLACE FUNCTION getendtoken(p_string character, p_regexp character, p_n integer)&#xA;               RETURNS character AS&#xA;             &#x9;    'DECLARE&#xA;             &#x9;&#x9;tokens text[]; &#xA;                     BEGIN&#xA;             &#x9;&#x9;select into tokens regexp_split_to_array(p_string, p_regexp); &#xA;             &#x9;&#x9;return (select tokens[array_length(tokens,1)- p_n  + 1]); &#xA;                     END;'&#xA;               LANGUAGE plpgsql VOLATILE&#xA;               COST 100; &#xA;        &lt;/createProcedure>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;argo-platform-views-5&quot;>&#xA;        &lt;createProcedure>&#xA;             CREATE OR REPLACE FUNCTION format_name(p_name character)&#xA;               RETURNS character AS&#xA;             &#x9;    'DECLARE&#xA;             &#x9;&#x9;parts text[];&#xA;                     BEGIN&#xA;             &#x9;&#x9;select into parts (regexp_matches(initcap(p_name), ''(.*)[ ,.]([a-zA-Z-]+)''));&#xA;             &#x9;&#x9;return (select parts[2]||'', ''||parts[1]);&#xA;                     END;'&#xA;               LANGUAGE plpgsql VOLATILE&#xA;               COST 100;&#xA;        &lt;/createProcedure>&#xA;    &lt;/changeSet>&#xA;&#xA;   &#xA;&#xA;    &lt;changeSet author=&quot;craigj&quot; id=&quot;1354485086817-28A&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;createView viewName=&quot;platform_metadata_current&quot; replaceIfExists=&quot;true&quot;>&#xA;             SELECT file.url, file.modified, platform_metadata.id, platform_metadata.file_id, platform_metadata.data_type, platform_metadata.format_version, platform_metadata.handbook_version, platform_metadata.date_creation, platform_metadata.date_update, platform_metadata.platform_number, platform_metadata.ptt, platform_metadata.trans_system, platform_metadata.trans_system_id, platform_metadata.trans_frequency, platform_metadata.trans_repetition, platform_metadata.positioning_system, platform_metadata.clock_drift, platform_metadata.platform_model, platform_metadata.platform_maker, platform_metadata.inst_reference, platform_metadata.wmo_inst_type, platform_metadata.direction, platform_metadata.project_name, platform_metadata.data_centre, platform_metadata.pi_name, platform_metadata.anomaly, platform_metadata.launch_date, platform_metadata.launch_latitude, platform_metadata.launch_longitude, platform_metadata.launch_qc, platform_metadata.start_date, platform_metadata.start_date_qc, platform_metadata.deploy_platform, platform_metadata.deploy_mission, platform_metadata.deploy_available_profile_id, platform_metadata.end_mission_date, platform_metadata.end_mission_status&#xA;               FROM platform_metadata&#xA;               JOIN indexed_file file ON file.id = platform_metadata.file_id AND not file.deleted;&#xA;           &lt;/createView>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;changeSet author=&quot;craigj&quot; id=&quot;1354485086817-28C&quot; failOnError=&quot;true&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;            CREATE OR REPLACE VIEW profile_general_current AS ( &#xA;                     SELECT file.url, file.modified, profile.file_id, profile.profile_no, profile.platform_number, profile.project_name, profile.pi_name, profile.cycle_number, profile.direction, profile.data_centre, profile.dc_reference, profile.data_state_indicator, profile.data_mode, profile.inst_reference, profile.wmo_inst_type, profile.juld, profile.juld_qc, profile.juld_location, profile.latitude, profile.longitude, profile.position_qc, profile.positioning_system, profile.profile_pres_qc, profile.profile_temp_qc, profile.profile_psal_qc, profile.profile_doxy_qc, profile.profile_temp_doxy_qc&#xA;                     FROM profile_general profile&#xA;                     JOIN indexed_file file ON file.id = profile.file_id AND NOT file.deleted)&#xA;         &lt;/sql>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;!-- Create a view containing summary information for an argo float -->&#xA;    &lt;!-- TODO: remove metadata_mod_date and last_profile_mod_date which were used by previous java harvester -->&#xA;    &lt;!-- need to check impact on GeoServer/FTL -->&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;alter_columns_1&quot;  runOnChange=&quot;false&quot;>&#xA;&#x9;&lt;sql>&#xA;&#xA;&#x9;  alter table profile_metadata alter column data_type type text;&#xA;&#xA;          DROP VIEW IF EXISTS profile_summary CASCADE;&#xA;          DROP VIEW IF EXISTS argo_float_abos_aodn_vw CASCADE;&#xA;          DROP VIEW IF EXISTS argo_float_oxygen_aodn_vw  CASCADE;&#xA;&#x9;  DROP VIEW IF EXISTS argo_float CASCADE;&#xA;&#xA;&#x9;  alter table profile_params alter column station_parameters type text;&#xA;&#xA;&#x9;&lt;/sql>&#xA;&lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;1354485086817-29&quot;  runOnChange=&quot;true&quot;>&#xA;        &lt;createView viewName=&quot;argo_float&quot; replaceIfExists=&quot;true&quot;>&#xA;             SELECT&#xA;                metadata.file_id, &#xA;                getendtoken(metadata.url, '/', 3) as thredds_folder,&#xA;                trim(metadata.platform_number) as platform_number, &#xA;                uuid_generate_v3(uuid_ns_url(),'http://emii.org.au/argo/platform/' || getendtoken(metadata.url, '/', 3) || '/' || metadata.platform_number) as uuid,&#xA;                launch_date,&#xA;                launch_longitude as launch_long,&#xA;                launch_latitude as launch_lat,&#xA;                start_date,&#xA;                format_name(regexp_replace(metadata.pi_name,'jamstec','','i')) as pi_name,&#xA;                metadata.data_centre as data_centre_code,&#xA;                (select name from data_centre where code = metadata.data_centre) as data_centre,&#xA;                last_profile.juld as last_measure_date, &#xA;                last_profile_region.name as region,&#xA;                st_xmin(platform_summary.extent) as min_long,&#xA;                st_xmax(platform_summary.extent) as max_long,&#xA;                last_profile.longitude as last_long,&#xA;                st_ymin(platform_summary.extent) as min_lat,&#xA;                st_ymax(platform_summary.extent) as max_lat,&#xA;                last_profile.latitude as last_lat,&#xA;                coalesce(exists(select true from profile_params where file_id = last_profile.file_id and trim(station_parameters) = 'DOXY'), false) as oxygen_sensor,&#xA;                metadata.modified at time zone 'UTC' as metadata_mod_date,&#xA;                getendtoken(last_profile.url,'/',1) as last_profile_dataset,&#xA;                last_profile.modified at time zone 'UTC' as last_profile_mod_date,&#xA;                lpad(to_hex((trunc((random() * (16777215)::double precision)))::integer), 6, '0') as colour,&#xA;                st_setsrid(st_makepoint(last_profile.longitude, last_profile.latitude), 4326) as last_location&#xA;                FROM platform_metadata_current metadata&#xA;                      LEFT OUTER JOIN &#xA;                        (select trim(data_centre) as data_centre, trim(platform_number) as platform_number, split_part(min((99999-cycle_number)||','||data_mode||','||file_id||','||profile_no),',',3)::integer as last_profile_id, split_part(min((100000-cycle_number)||','||data_mode||','||file_id||','||profile_no),',',4)::integer as last_profile_no, st_extent(st_makepoint(longitude, latitude)) as extent&#xA;                           from profile_general_current&#xA;                          group by trim(data_centre), trim(platform_number)) as platform_summary on (trim(platform_summary.data_centre) = trim(metadata.data_centre) and trim(platform_summary.platform_number) = trim(metadata.platform_number))&#xA;                      LEFT OUTER JOIN profile_general_current as last_profile on (last_profile.file_id = platform_summary.last_profile_id and last_profile.profile_no = platform_summary.last_profile_no)&#xA;                      LEFT OUTER JOIN region as last_profile_region on (ST_Contains(last_profile_region.geom, st_setsrid(st_makepoint(last_profile.longitude, last_profile.latitude),4326)))&#xA;        &lt;/createView>&#xA;    &lt;/changeSet>&#xA;    &#xA;    &lt;!-- Can be more than one profile file present for the cycle: deferred, realtime    -->&#xA;    &lt;!-- (rare - meant to be only one) and descending and/or ascending (also rare)      -->&#xA;    &lt;!-- Create a view containing the best profile to use for location purposes         -->&#xA;    &lt;!-- Pick a deferred profile in preference to a realtime profile as this has been   -->&#xA;    &lt;!-- QA'd. Ascending or descending doesn't matter - both have the same location     -->&#xA;&#xA;    &lt;changeSet author=&quot;craigj&quot; id=&quot;1354485086817-31&quot; runOnChange=&quot;true&quot;>&#xA;            &lt;sql>&#xA;        DROP VIEW IF EXISTS best_cycle_location CASCADE;&#xA;        CREATE VIEW best_cycle_location AS ( &#xA;            SELECT DISTINCT ON (profile.data_centre, profile.platform_number, profile.cycle_number)&#xA;              file.url, &#xA;              file.modified, &#xA;              profile.*,&#xA;              lag(profile.latitude, 1) OVER (PARTITION BY profile.data_centre, profile.platform_number ORDER BY profile.cycle_number) as last_latitude,&#xA;              lag(profile.longitude, 1) OVER (PARTITION BY profile.data_centre, profile.platform_number ORDER BY profile.cycle_number) as last_longitude&#xA;             FROM profile_general profile&#xA;             JOIN indexed_file file ON file.id = profile.file_id AND not file.deleted&#xA;            WHERE profile.position_qc = '1'&#xA;            ORDER BY profile.data_centre, profile.platform_number, profile.cycle_number,&#xA;              CASE&#xA;                WHEN profile.data_mode = 'D' THEN 0&#xA;                ELSE 1&#xA;              END );&#xA;            &lt;/sql>&#xA;     &lt;/changeSet>&#xA;&#xA;   &#xA;&#xA;&#xA;&#xA; &lt;!-- Create view containing summary info for each cycle.  Includes line segment from previous cycle for float (or the launch location if there isn't one) to the current location. -->&#xA;    &lt;!-- Includes same columns as previous java harvester TODO: remove columns which are no longer filled (may need changes to GeoServer/FTL) -->&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;float_cycle_vw&quot; failOnError=&quot;true&quot; runOnChange=&quot;true&quot;>&#xA;        &lt;sql>&#xA;        DROP VIEW IF EXISTS float_cycle;&#xA; &#x9;CREATE VIEW float_cycle AS ( &#xA;&#x9;   SELECT platform.file_id AS float_id, &#xA;             &#x9;profile.cycle_number AS cycle,&#xA;             &#x9;getendtoken(profile.url, '/', 1) AS profile_dataset, &#xA;             &#x9;(((getendtoken(profile.url, '/', 4) || '/') || getendtoken(profile.url, '/', 3)) || '/') || getendtoken(profile.url, '/', 2) AS thredds_folder, &#xA;             &#x9;NULL::timestamp without time zone AS descent_start_date, &#xA;             &#x9;NULL::timestamp without time zone AS ascent_end_date, &#xA;             &#x9;profile.juld AS last_measurement_date, &#xA;             &#x9;st_setsrid(make_shortest_line(COALESCE(st_makepoint(profile.last_longitude, profile.last_latitude), st_makepoint(platform.launch_longitude, platform.launch_latitude)), st_makepoint(profile.longitude, profile.latitude)), 4326) AS trajectory&#xA;               FROM best_cycle_location profile&#xA;                     INNER JOIN platform_metadata_current platform ON platform.data_centre::text = profile.data_centre::text AND platform.platform_number::text = profile.platform_number::text)&#xA;        &lt;/sql>&#xA;   &lt;/changeSet>&#xA;&#xA;&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <elementParameter field="CHECK" name="INFORMATION" value="false"/>
    <elementParameter field="MEMO" name="COMMENT" value=""/>
    <elementParameter field="CHECK" name="VALIDATION_RULES" value="false"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="384" posY="256">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_5"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/opt/TOS_DI-r96646-V5.1.3/workspace_sdi/harvesters/workspace/changelog.xml&quot;"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xA;&lt;databaseChangeLog &#xA;    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;&#xA;    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#xA;    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;    &#xA; &lt;changeSet author=&quot;talend&quot; id=&quot;Profile_Download_Layer&quot; failOnError=&quot;true&quot;  runOnChange = &quot;true&quot;>&#xA;        &lt;sql>&#x9;  &#xA;&#x9;&#x9;--DROP VIEW IF EXISTS argo_profile_map;&#xA;&#x9;&#x9;--DROP VIEW IF EXISTS profile_download;&#xA;&#xA;&#xA;&#x9;&#x9;--DROP VIEW IF EXISTS argo_profile_data CASCADE;&#xA;&#x9;&#x9;DROP VIEW IF EXISTS profile_summary CASCADE;&#xA;&#xA;&#xA;        &lt;/sql>&#xA;&#xA;&#xA;        &lt;sql>&#xA;        CREATE VIEW profile_summary AS (&#xA;&#x9;&#x9;&#x9;SELECT profile_general.*,&#xA;&#x9;&#x9;&#x9;    CASE&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'ME'::text THEN 'MEDS'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'IF'::text THEN 'CORIOLIS'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'CS'::text THEN 'CSIRO'::character varying&#xA;&#x9;&#x9;&#x9;&#x9;   WHEN profile_general.data_centre::text ~ 'IN'::text THEN 'INCOIS'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'AO'::text THEN 'AOML'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'NM'::text THEN 'NMDIS'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'HZ'::text THEN 'CSIO'::character varying&#xA;&#x9;&#x9;&#x9;&#x9;   WHEN profile_general.data_centre::text ~ 'JA'::text THEN 'JMA'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'KO'::text THEN 'KORDI'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'BO'::text THEN 'BODC'::character varying&#xA;&#x9;&#x9;&#x9;       WHEN profile_general.data_centre::text ~ 'KM'::text THEN 'KMA'::character varying&#xA;&#x9;&#x9;&#x9;       ELSE NULL::character varying&#xA;&#x9;&#x9;&#x9;    END AS data_centre_name,   &#xA;&#xA;&#x9;&#x9;&#x9;    CASE&#xA;&#x9;&#x9;&#x9;          WHEN indexed_file.url::text ~ 'profiles/?.R'::text THEN 'Realtime'::character varying&#xA;&#x9;&#x9;&#x9;          WHEN indexed_file.url::text ~ 'profiles/?.D'::text THEN 'Delayed'::character varying            &#xA;&#x9;&#x9;&#x9;    END AS profile_processing_type,&#xA;&#x9;&#x9;&#x9;    CASE&#xA;&#x9;&#x9;&#x9;          WHEN indexed_file.url::text ~ 'profiles/M'::text THEN 'Merged-argo profile'::character varying&#xA;&#x9;&#x9;&#x9;          WHEN indexed_file.url::text ~ 'profiles/B'::text THEN 'Bio-argo profile'::character varying            &#xA;&#x9;&#x9;&#x9;          ELSE 'Core-argo profile'&#xA;&#x9;&#x9;&#x9;    END AS profile_type,&#xA;&#xA;&#x9;&#x9;&#x9;    exists(&#xA;&#x9;&#x9;&#x9;       SELECT true&#xA;&#x9;&#x9;&#x9;         from profile_params&#xA;&#x9;&#x9;&#x9;        where profile_params.file_id = profile_general.file_id&#xA;&#x9;&#x9;&#x9;          and profile_params.profile_no = profile_general.profile_no&#xA;&#x9;&#x9;&#x9;          and station_parameters = 'DOXY') as oxygen_sensor&#xA;&#xA;&#x9;&#x9;&#x9; from profile_general, indexed_file WHERE  indexed_file.id = profile_general.file_id);&#xA;        &lt;/sql>&#xA;&#xA;        &lt;sql>&#xA;        CREATE VIEW argo_profile_data AS (&#xA;&#x9;&#x9;    SELECT&#xA;&#x9;&#x9;       url,size, &#xA;&#x9;&#x9;       data_centre_name, platform_number, &#xA;&#x9;&#x9;       cycle_number,  direction,&#xA;&#x9;&#x9;       data_state_indicator, &#xA;&#x9;&#x9;       data_mode, juld, juld_qc, &#xA;&#x9;&#x9;       juld_location, latitude, &#xA;&#x9;&#x9;       longitude, position_qc,&#xA;&#x9;&#x9;       position, oxygen_sensor,&#xA;&#x9;&#x9;       project_name,&#xA;&#x9;&#x9;       level_no, pres, pres_qc, &#xA;&#x9;&#x9;       pres_adjusted, pres_adjusted_qc, &#xA;&#x9;&#x9;       pres_adjusted_error, temp, &#xA;&#x9;&#x9;       temp_qc, temp_adjusted, &#xA;&#x9;&#x9;       temp_adjusted_qc, temp_adjusted_error,&#xA;&#x9;&#x9;       psal, psal_qc, psal_adjusted, &#xA;&#x9;&#x9;       psal_adjusted_qc, psal_adjusted_error,&#xA;&#x9;&#x9;       doxy, doxy_adjusted, doxy_qc, &#xA;&#x9;&#x9;       doxy_adjusted_qc, doxy_adjusted_error,&#xA;&#x9;&#x9;       temp_doxy, temp_doxy_adjusted, &#xA;&#x9;&#x9;       temp_doxy_qc, temp_doxy_adjusted_qc, &#xA;&#x9;&#x9;       temp_doxy_adjusted_error,&#xA;&#x9;&#x9;       c1phase_doxy, c1phase_doxy_qc,&#xA;&#x9;&#x9;       c2phase_doxy, c2phase_doxy_qc,&#xA;                       nitrate, nitrate_qc,&#xA;&#x9;&#x9;       nitrate_adjusted, nitrate_adjusted_qc,&#xA;  &#x9;&#x9;       ph_in_situ_total, ph_in_situ_total_qc,&#xA;                       ph_in_situ_total_adjusted, ph_in_situ_total_adjusted_qc,&#xA;&#x9;&#x9;       profile_summary.profile_processing_type,&#xA;&#x9;&#x9;       profile_summary.profile_type,&#xA;&#x9;&#x9;       profile_summary.profile_no&#xA;&#x9;&#x9;    FROM &#xA;&#x9;&#x9;       profile_summary, &#xA;&#x9;&#x9;       profile_measurements,&#xA;&#x9;&#x9;       indexed_file&#xA;&#x9;&#x9;    WHERE profile_summary.file_id = profile_measurements.file_id&#xA;&#x9;&#x9;        and profile_summary.profile_no = profile_measurements.profile_no and indexed_file.id = profile_measurements.file_id&#xA;          ) ;&#xA;        &lt;/sql>   &#xA;&#xA;&#x9;&#x9;&lt;sql>&#xA;        CREATE VIEW argo_profile_map AS (&#xA;&#x9;&#x9;&#x9;SELECT &#xA;&#x9;&#x9;&#x9;profile_summary.*,&#xA;&#x9;&#x9;&#x9;indexed_file.*&#xA;&#xA;&#x9;&#x9;&#x9;from profile_summary&#xA;&#x9;&#x9;&#x9;left join indexed_file&#xA;&#x9;&#x9;&#x9;on file_id = indexed_file.id&#xA;&#x9;&#x9;) ;&#xA;        &lt;/sql>   &#xA;&#xA;&#x9;&#x9;&lt;sql>&#xA;&#x9;&#x9;CREATE VIEW argo_primary_profile_core_low_res_good_qc_data AS (&#xA;&#x9;&#x9;&#x9;SELECT url,&#xA;&#x9;&#x9;&#x9;    size,&#xA;                            data_centre_name,&#xA;&#x9;&#x9;&#x9;    oxygen_sensor,&#xA;&#x9;&#x9;&#x9;    platform_number,&#xA;&#x9;&#x9;&#x9;    cycle_number,&#xA;&#x9;&#x9;&#x9;    direction,&#xA;&#x9;&#x9;&#x9;    data_state_indicator,&#xA;&#x9;&#x9;&#x9;    data_mode,&#xA;&#x9;&#x9;&#x9;    juld,&#xA;&#x9;&#x9;&#x9;    juld_qc,&#xA;&#x9;&#x9;&#x9;    juld_location,&#xA;&#x9;&#x9;&#x9;    latitude,&#xA;&#x9;&#x9;&#x9;    longitude,&#xA;&#x9;&#x9;&#x9;    position_qc,&#xA;&#x9;&#x9;&#x9;    position,&#xA;&#x9;&#x9;&#x9;    project_name,&#xA;&#x9;&#x9;&#x9;    profile_processing_type,&#xA;&#x9;&#x9;&#x9;    profile_type,&#xA;&#x9;&#x9;&#x9;    profile_no,&#xA;&#x9;&#x9;&#x9;    level_no,&#xA;&#x9;&#x9;&#x9;    pres,&#xA;&#x9;&#x9;&#x9;    pres_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_error,&#xA;&#x9;&#x9;&#x9;    temp,&#xA;&#x9;&#x9;&#x9;    temp_qc,&#xA;&#x9;&#x9;&#x9;    temp_adjusted,&#xA;&#x9;&#x9;&#x9;    temp_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    temp_adjusted_error,&#xA;&#x9;&#x9;&#x9;    psal,&#xA;&#x9;&#x9;&#x9;    psal_qc,&#xA;&#x9;&#x9;&#x9;    psal_adjusted,&#xA;&#x9;&#x9;&#x9;    psal_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    psal_adjusted_error,&#xA;&#x9;&#x9;&#x9;    doxy,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted,&#xA;&#x9;&#x9;&#x9;    doxy_qc,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted_error,&#xA;&#x9;&#x9;&#x9;    temp_doxy,&#xA;&#x9;&#x9;&#x9;    temp_doxy_adjusted,&#xA;&#x9;&#x9;&#x9;    temp_doxy_qc,&#xA;&#x9;&#x9;&#x9;    temp_doxy_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    temp_doxy_adjusted_error&#xA;&#x9;&#x9;&#x9;FROM argo_profile_data&#xA;&#x9;&#x9;&#x9;WHERE profile_no = 1 and pres_qc IN ('1', '2', '5', '8') and profile_type = 'Core-argo profile');&#xA;&#xA;        &lt;/sql>   &#xA;&#xA;&#x9;&#x9;&lt;sql>&#xA;&#x9;&#x9;CREATE VIEW argo_sec_profiles_core_high_res_good_qc_data AS (&#xA;&#x9;&#x9;&#x9;SELECT url,&#xA;&#x9;&#x9;&#x9;    size,&#xA;&#x9;&#x9;&#x9;    oxygen_sensor,&#xA;&#x9;&#x9;&#x9;    platform_number,&#xA;&#x9;&#x9;&#x9;    cycle_number,&#xA;&#x9;&#x9;&#x9;    direction,&#xA;&#x9;&#x9;&#x9;    data_state_indicator,&#xA;&#x9;&#x9;&#x9;    data_mode,&#xA;&#x9;&#x9;&#x9;    juld,&#xA;&#x9;&#x9;&#x9;    juld_qc,&#xA;&#x9;&#x9;&#x9;    juld_location,&#xA;&#x9;&#x9;&#x9;    latitude,&#xA;&#x9;&#x9;&#x9;    longitude,&#xA;&#x9;&#x9;&#x9;    position_qc,&#xA;&#x9;&#x9;&#x9;    position,&#xA;&#x9;&#x9;&#x9;    project_name,&#xA;&#x9;&#x9;&#x9;    profile_processing_type,&#xA;&#x9;&#x9;&#x9;    profile_type,&#xA;&#x9;&#x9;&#x9;    profile_no,&#xA;&#x9;&#x9;&#x9;    level_no,&#xA;&#x9;&#x9;&#x9;    pres,&#xA;&#x9;&#x9;&#x9;    pres_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_error,&#xA;&#x9;&#x9;&#x9;    temp,&#xA;&#x9;&#x9;&#x9;    temp_qc,&#xA;&#x9;&#x9;&#x9;    temp_adjusted,&#xA;&#x9;&#x9;&#x9;    temp_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    temp_adjusted_error,&#xA;&#x9;&#x9;&#x9;    psal,&#xA;&#x9;&#x9;&#x9;    psal_qc,&#xA;&#x9;&#x9;&#x9;    psal_adjusted,&#xA;&#x9;&#x9;&#x9;    psal_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    psal_adjusted_error&#xA;&#xA;&#x9;&#x9;&#x9;FROM argo_profile_data&#xA;&#x9;&#x9;&#x9;WHERE profile_no IN ('2','3','4') and  pres_qc IN ('1', '2', '5', '8') and profile_type = 'Core-argo profile' ORDER BY platform_number, cycle_number, pres);&#xA;&#xA;        &lt;/sql>   &#xA;       &#xA;&#xA;&#x9;&#x9;&lt;sql>&#xA;&#x9;&#x9;CREATE VIEW argo_primary_profile_bio_high_res_data AS (&#xA;&#x9;&#x9;&#x9;SELECT url,&#xA;&#x9;&#x9;&#x9;    size,&#xA;&#x9;&#x9;&#x9;    oxygen_sensor,&#xA;&#x9;&#x9;&#x9;    platform_number,&#xA;&#x9;&#x9;&#x9;    cycle_number,&#xA;&#x9;&#x9;&#x9;    direction,&#xA;&#x9;&#x9;&#x9;    data_state_indicator,&#xA;&#x9;&#x9;&#x9;    data_mode,&#xA;&#x9;&#x9;&#x9;    juld,&#xA;&#x9;&#x9;&#x9;    juld_qc,&#xA;&#x9;&#x9;&#x9;    juld_location,&#xA;&#x9;&#x9;&#x9;    latitude,&#xA;&#x9;&#x9;&#x9;    longitude,&#xA;&#x9;&#x9;&#x9;    position_qc,&#xA;&#x9;&#x9;&#x9;    position,&#xA;&#x9;&#x9;&#x9;    project_name,&#xA;&#x9;&#x9;&#x9;    profile_processing_type,&#xA;&#x9;&#x9;&#x9;    profile_type,&#xA;&#x9;&#x9;&#x9;    profile_no,&#xA;&#x9;&#x9;&#x9;    level_no,&#xA;&#x9;&#x9;&#x9;    pres,&#xA;&#x9;&#x9;&#x9;    pres_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_error,&#xA;&#x9;&#x9;&#x9;    doxy,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted,&#xA;&#x9;&#x9;&#x9;    doxy_qc,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted_error,&#xA;&#x9;&#x9;&#x9;    temp_doxy,&#xA;&#x9;&#x9;&#x9;    temp_doxy_adjusted,&#xA;&#x9;&#x9;&#x9;    temp_doxy_qc,&#xA;&#x9;&#x9;&#x9;    temp_doxy_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    temp_doxy_adjusted_error,&#xA;&#x9;&#x9;&#x9;    c1phase_doxy,&#xA;&#x9;&#x9;&#x9;    c1phase_doxy_qc,&#xA;&#x9;&#x9;&#x9;    c2phase_doxy,&#xA;&#x9;&#x9;&#x9;    c2phase_doxy_qc&#xA;&#xA;&#x9;&#x9;&#x9;FROM argo_profile_data&#xA;&#x9;&#x9;&#x9;WHERE profile_no = 1 and profile_type = 'Bio-argo profile');&#xA;    &#x9;&lt;/sql>   &#xA;&#xA;&#xA;&#x9;&#x9;&lt;sql>&#xA;&#x9;&#x9;CREATE VIEW argo_primary_profile_merged_low_res_good_qc_data AS (&#xA;&#x9;&#x9;&#x9;SELECT url,&#xA;&#x9;&#x9;&#x9;    size,&#xA;&#x9;&#x9;&#x9;    oxygen_sensor,&#xA;&#x9;&#x9;&#x9;    platform_number,&#xA;&#x9;&#x9;&#x9;    cycle_number,&#xA;&#x9;&#x9;&#x9;    direction,&#xA;&#x9;&#x9;&#x9;    data_state_indicator,&#xA;&#x9;&#x9;&#x9;    data_mode,&#xA;&#x9;&#x9;&#x9;    juld,&#xA;&#x9;&#x9;&#x9;    juld_qc,&#xA;&#x9;&#x9;&#x9;    juld_location,&#xA;&#x9;&#x9;&#x9;    latitude,&#xA;&#x9;&#x9;&#x9;    longitude,&#xA;&#x9;&#x9;&#x9;    position_qc,&#xA;&#x9;&#x9;&#x9;    position,&#xA;&#x9;&#x9;&#x9;    project_name,&#xA;&#x9;&#x9;&#x9;    profile_processing_type,&#xA;&#x9;&#x9;&#x9;    profile_type,&#xA;&#x9;&#x9;&#x9;    profile_no,&#xA;&#x9;&#x9;&#x9;    level_no,&#xA;&#x9;&#x9;&#x9;    pres,&#xA;&#x9;&#x9;&#x9;    pres_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    pres_adjusted_error,&#xA;&#x9;&#x9;&#x9;    temp,&#xA;&#x9;&#x9;&#x9;    temp_qc,&#xA;&#x9;&#x9;&#x9;    temp_adjusted,&#xA;&#x9;&#x9;&#x9;    temp_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    temp_adjusted_error,&#xA;&#x9;&#x9;&#x9;    doxy,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted,&#xA;&#x9;&#x9;&#x9;    doxy_qc,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted_qc,&#xA;&#x9;&#x9;&#x9;    doxy_adjusted_error&#xA;&#x9;&#x9;&#x9;    &#xA;&#x9;&#x9;&#x9;FROM argo_profile_data&#xA;&#x9;&#x9;&#x9;WHERE profile_no = 1 and pres_qc IN ('1', '2', '5', '8') and profile_type = 'Merged-argo profile');&#xA;    &#x9;&lt;/sql>   &#xA;&#x9;&#x9;&lt;sql>&#xA;&#x9;&#x9;CREATE VIEW argo_profile_nitrate_data AS (&#xA;&#x9;        SELECT url,&#xA;&#x9;            size,&#xA;&#x9;            oxygen_sensor,&#xA;&#x9;            platform_number,&#xA;&#x9;            cycle_number,&#xA;&#x9;            direction,&#xA;&#x9;            data_state_indicator,&#xA;&#x9;            data_mode,&#xA;&#x9;            juld,&#xA;&#x9;            juld_qc,&#xA;&#x9;            juld_location,&#xA;&#x9;            latitude,&#xA;&#x9;            longitude,&#xA;&#x9;            position_qc,&#xA;&#x9;            position,&#xA;&#x9;            project_name,&#xA;&#x9;            profile_processing_type,&#xA;&#x9;            profile_type,&#xA;&#x9;            profile_no,&#xA;&#x9;            level_no,&#xA;&#x9;            pres,&#xA;&#x9;            pres_qc,&#xA;&#x9;            pres_adjusted,&#xA;&#x9;            pres_adjusted_qc,&#xA;&#x9;            pres_adjusted_error,&#xA;&#x9;            nitrate,&#xA;&#x9;            nitrate_qc&#xA;&#x9;        FROM argo_profile_data&#xA;&#x9;        WHERE nitrate is NOT NULL);&#xA;    &#x9;&lt;/sql>   &#xA;    &lt;/changeSet>&#xA;&lt;/databaseChangeLog> &#xA;"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <elementParameter field="CHECK" name="INFORMATION" value="false"/>
    <elementParameter field="MEMO" name="COMMENT" value=""/>
    <elementParameter field="CHECK" name="VALIDATION_RULES" value="false"/>
  </node>
  <node componentName="iPostgresqlDbUpdate" componentVersion="0.1" offsetLabelX="0" offsetLabelY="0" posX="640" posY="256">
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_6"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:PROPERTY_TYPE" value="REPOSITORY"/>
    <elementParameter field="TECHNICAL" name="PROPERTY:REPOSITORY_PROPERTY_TYPE" value="_HtNvQDKiEeKrFtsLd2Qz2g"/>
    <elementParameter field="TEXT" name="HOST" value="context.Destination_Server"/>
    <elementParameter field="TEXT" name="TYPE" value="POSTGRESQL"/>
    <elementParameter field="TEXT" name="PORT" value="context.Destination_Port"/>
    <elementParameter field="TEXT" name="DBNAME" value="context.Destination_Database"/>
    <elementParameter field="TEXT" name="SCHEMA_DB" value="context.Destination_Schema"/>
    <elementParameter field="TEXT" name="USER" value="context.Destination_Login"/>
    <elementParameter field="TEXT" name="PASS" value="context.Destination_Password"/>
    <elementParameter field="FILE" name="FILENAME" value="&quot;/par2/talend-team-2.ws/changelog.xml&quot;"/>
    <elementParameter field="CHECK" name="USE_INLINE_CONTENT" value="true"/>
    <elementParameter field="MEMO" name="INLINE_CONTENT" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?>&#xA;&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;>&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;aodn_argo_float_abos_vw&quot; runOnChange=&quot;true&quot;>&#xA;       &lt;sql>&#xA;DROP VIEW IF EXISTS argo_float_abos_aodn_vw;&#xA;CREATE OR REPLACE  VIEW argo_float_abos_aodn_vw AS &#xA; SELECT argo_float.file_id as id,&#xA;    argo_float.thredds_folder,&#xA;    argo_float.platform_number,&#xA;    argo_float.uuid,&#xA;    argo_float.launch_date,&#xA;    argo_float.launch_long,&#xA;    argo_float.launch_lat,&#xA;    argo_float.start_date,&#xA;    argo_float.pi_name,&#xA;    argo_float.data_centre_code,&#xA;    argo_float.data_centre,&#xA;    argo_float.last_measure_date,&#xA;    argo_float.region,&#xA;    argo_float.min_long,&#xA;    argo_float.max_long,&#xA;    argo_float.last_long,&#xA;    argo_float.min_lat,&#xA;    argo_float.max_lat,&#xA;    argo_float.last_lat,&#xA;    argo_float.oxygen_sensor,&#xA;    argo_float.metadata_mod_date,&#xA;    timezone('UTC'::text ,NULL ) as trajectory_mod_date,&#xA;    argo_float.last_profile_mod_date,&#xA;    argo_float.colour,&#xA;    argo_float.last_location&#xA;   FROM argo_float&#xA;  WHERE argo_float.platform_number::text ~~ '5903264'::text OR argo_float.platform_number::text ~~ '5903225'::text;&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;aodn_argo_float_oxygen_vw&quot; runOnChange = &quot;true&quot; >&#xA;       &lt;sql>&#xA;DROP VIEW IF EXISTS argo_float_oxygen_aodn_vw;&#xA;CREATE OR REPLACE  VIEW argo_float_oxygen_aodn_vw AS &#xA;SELECT argo_float.file_id as id,&#xA;    argo_float.thredds_folder,&#xA;    argo_float.platform_number,&#xA;    argo_float.uuid,&#xA;    argo_float.launch_date,&#xA;    argo_float.launch_long,&#xA;    argo_float.launch_lat,&#xA;    argo_float.start_date,&#xA;    argo_float.pi_name,&#xA;    argo_float.data_centre_code,&#xA;    argo_float.data_centre,&#xA;    argo_float.last_measure_date,&#xA;    argo_float.region,&#xA;    argo_float.min_long,&#xA;    argo_float.max_long,&#xA;    argo_float.last_long,&#xA;    argo_float.min_lat,&#xA;    argo_float.max_lat,&#xA;    argo_float.last_lat,&#xA;    argo_float.oxygen_sensor,&#xA;    argo_float.metadata_mod_date,&#xA;    NULL as trajectory_mod_date,&#xA;    argo_float.last_profile_dataset,&#xA;    argo_float.last_profile_mod_date,&#xA;    argo_float.colour,&#xA;    argo_float.last_location&#xA;   FROM argo_float&#xA;  WHERE argo_float.oxygen_sensor;&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;changeSet author=&quot;talend&quot; id=&quot;aodn_argo_float_vw&quot; runOnChange = &quot;true&quot; >&#xA;       &lt;sql>&#xA;DROP VIEW IF EXISTS argo_float_aodn_vw;&#xA;CREATE OR REPLACE  VIEW argo_float_aodn_vw AS &#xA;SELECT argo_float.file_id as id,&#xA;    argo_float.thredds_folder,&#xA;    argo_float.platform_number,&#xA;    argo_float.uuid,&#xA;    argo_float.launch_date,&#xA;    argo_float.launch_long,&#xA;    argo_float.launch_lat,&#xA;    argo_float.start_date,&#xA;    argo_float.pi_name,&#xA;    argo_float.data_centre_code,&#xA;    argo_float.data_centre,&#xA;    argo_float.last_measure_date,&#xA;    argo_float.region,&#xA;    argo_float.min_long,&#xA;    argo_float.max_long,&#xA;    argo_float.last_long,&#xA;    argo_float.min_lat,&#xA;    argo_float.max_lat,&#xA;    argo_float.last_lat,&#xA;    argo_float.oxygen_sensor,&#xA;    argo_float.metadata_mod_date,&#xA;    NULL as trajectory_mod_date,&#xA;    argo_float.last_profile_dataset,&#xA;    argo_float.last_profile_mod_date,&#xA;    argo_float.colour,&#xA;    argo_float.last_location&#xA;   FROM argo_float;&#xA;&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;aodn_argo_traj_vw&quot; runOnChange=&quot;true&quot;>&#xA;       &lt;sql>&#xA;DROP MATERIALIZED VIEW IF EXISTS argo_trajectory_map;&#xA;CREATE MATERIALIZED VIEW argo_trajectory_map AS &#xA;SELECT platform_number,&#xA;       date_trunc('quarter', juld) as datechunk,&#xA;       data_centre_name, &#xA;       profile_processing_type,&#xA;       oxygen_sensor,&#xA;       timezone('UTC'::text, min(juld)) AS time_coverage_start,&#xA;       timezone('UTC'::text, max(juld)) AS time_coverage_end,&#xA;       make_trajectory(&quot;position&quot; order by platform_number, juld) as traj,&#xA;       ST_Multi(ST_Union(profile_summary.&quot;position&quot;)) AS  mpoint &#xA;FROM profile_summary WHERE profile_no = 1&#xA;group by platform_number, data_centre_name,oxygen_sensor, profile_processing_type, datechunk;&#xA;   &lt;/sql>&#xA;   &lt;sql>&#xA;CREATE UNIQUE INDEX trajec_vw_idx ON argo_trajectory_map (platform_number, profile_processing_type, oxygen_sensor, datechunk);&#xA;   &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;aodn_float_aus_region_vw&quot; runOnChange=&quot;true&quot;>&#xA;       &lt;sql>&#xA;DROP MATERIALIZED VIEW IF EXISTS argo_float_aus_region_map;&#xA;CREATE MATERIALIZED VIEW argo_float_aus_region_map AS &#xA;SELECT platform_number, &#xA;       juld,&#xA;       data_centre_name,&#xA;       profile_processing_type,&#xA;       oxygen_sensor,      &#xA;       position &#xA;FROM profile_summary &#xA;WHERE profile_no = 1 AND position &amp;amp;&amp;amp; ST_MakeEnvelope(46,-70,135, 21, 4326) OR data_centre_name = 'CSIRO'&#xA;group by platform_number, data_centre_name,oxygen_sensor, profile_processing_type, juld,position;&#xA;   &lt;/sql>&#xA;   &lt;sql>&#xA;CREATE UNIQUE INDEX pos_vw_idx ON argo_float_aus_region_map (platform_number, profile_processing_type, oxygen_sensor, juld,position);&#xA;   &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&#xA;   &lt;changeSet author=&quot;talend&quot; id=&quot;aodn_float_aus_so_region_vw&quot; runOnChange=&quot;true&quot;>&#xA;       &lt;sql>&#xA;DROP MATERIALIZED VIEW IF EXISTS argo_float_aus_so_region_map;&#xA;CREATE MATERIALIZED VIEW argo_float_aus_so_region_map AS&#xA;SELECT profile_summary.platform_number,&#xA;    profile_summary.juld,&#xA;    profile_summary.data_centre_name,&#xA;    profile_summary.profile_processing_type,&#xA;    profile_summary.oxygen_sensor,&#xA;    profile_summary.position,&#xA;    indexed_file.url&#xA;  FROM argo.profile_summary&#xA;  LEFT JOIN argo.indexed_file ON profile_summary.file_id = indexed_file.id&#xA;  WHERE profile_summary.profile_no = 1 &#xA;  AND (ST_Contains(st_makepolygon(st_geomfromtext('LINESTRING(46 -40, 46 20 , 165 20, 165 -40, 180 -40, 180 -85, -180 -85, -180 -40, 46 -40 )'::text, 4326)), position) OR data_centre_name = 'CSIRO'::text) &#xA;  GROUP BY indexed_file.url, profile_summary.platform_number, profile_summary.data_centre_name, profile_summary.oxygen_sensor, profile_summary.profile_processing_type, profile_summary.juld, profile_summary.position;&#xA;   &lt;/sql>&#xA;   &lt;sql>&#xA;CREATE UNIQUE INDEX pos_aus_so_vw_idx ON argo_float_aus_so_region_map (url,platform_number, profile_processing_type, oxygen_sensor, juld,position);&#xA;   &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;indexes_vw_aus_region&quot;>&#xA;       &lt;sql>&#xA;&#x9;CREATE INDEX float_aus_region_pos_idx  ON argo_float_aus_region_map USING gist (position);&#xA;&#x9;CREATE INDEX float_aus_region_time_idx  ON argo_float_aus_region_map USING btree (juld);&#xA;       &lt;/sql>&#xA;&#xA;       &lt;sql>&#xA;&#x9;CREATE INDEX float_aus_traj_idx ON argo_trajectory_map USING gist (mpoint);&#xA;&#x9;CREATE INDEX float_aus_traj_timeStart_idx  ON argo_trajectory_map USING btree (time_coverage_start);&#xA;&#x9;CREATE INDEX float_aus_traj_timeEnd_idx  ON argo_trajectory_map USING btree (time_coverage_end);&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;    &lt;changeSet author=&quot;talend&quot; id=&quot;indexes_aus_so1_vw&quot;>&#xA;       &lt;sql>&#xA;&#x9;CREATE INDEX float_aus_so_region_pos_idx  ON argo_float_aus_so_region_map USING gist (position);&#xA;&#x9;CREATE INDEX float_aus_so_region_time_idx  ON argo_float_aus_so_region_map USING btree (juld);&#xA;       &lt;/sql>&#xA;    &lt;/changeSet>&#xA;&#xA;&lt;/databaseChangeLog>"/>
    <elementParameter field="TEXT" name="CONNECTION_FORMAT" value="row"/>
    <elementParameter field="CHECK" name="INFORMATION" value="false"/>
    <elementParameter field="MEMO" name="COMMENT" value=""/>
    <elementParameter field="CHECK" name="VALIDATION_RULES" value="false"/>
  </node>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_1" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_1" target="iPostgresqlDbUpdate_2">
    <elementParameter field="CHECK" name="ACTIVATE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk3"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_2" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_2" target="iPostgresqlDbUpdate_3">
    <elementParameter field="CHECK" name="ACTIVATE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk4"/>
  </connection>
  <connection connectorName="COMPONENT_OK" label="OnComponentOk" lineStyle="3" metaname="iPostgresqlDbUpdate_3" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_3" target="iPostgresqlDbUpdate_4">
    <elementParameter field="CHECK" name="ACTIVATE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnComponentOk3"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_4" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_4" target="iPostgresqlDbUpdate_5">
    <elementParameter field="CHECK" name="ACTIVATE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk1"/>
  </connection>
  <connection connectorName="SUBJOB_OK" label="OnSubjobOk" lineStyle="1" metaname="iPostgresqlDbUpdate_5" offsetLabelX="0" offsetLabelY="0" source="iPostgresqlDbUpdate_5" target="iPostgresqlDbUpdate_6">
    <elementParameter field="CHECK" name="ACTIVATE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="OnSubjobOk5"/>
  </connection>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_1"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create/update profile position tables"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_2"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create/Update Database Schema"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_3"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create/Update Database Schema"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_4"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="Create Argo Views and functions"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_5"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="CreateIMOSViews"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
  <subjob>
    <elementParameter field="CHECK" name="SHOW_SUBJOB_TITLE" value="true"/>
    <elementParameter field="TEXT" name="UNIQUE_NAME" value="iPostgresqlDbUpdate_6"/>
    <elementParameter field="TEXT" name="SUBJOB_TITLE" value="create aodn view"/>
    <elementParameter field="COLOR" name="SUBJOB_TITLE_COLOR" value="160;190;240"/>
    <elementParameter field="COLOR" name="SUBJOB_COLOR" value="220;220;250"/>
  </subjob>
</talendfile:ProcessType>
